

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Lesson 30: JavaScript for stand-alone Bokeh apps &mdash; Programming Bootcamp  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "document", "processHtmlClass": "math|output_area"}}</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lesson 31: Introduction to scripting" href="l31_intro_to_scripting.html" />
    <link rel="prev" title="Lesson 33: Bootcamp recap" href="l33_bootcamp_recap.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F1F2D8" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Lessons</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="l00_configuring_your_computer.html">Lesson 0: Configuring your computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="l01_welcome.html">Lesson 1: Welcome and Introduction to JupyterLab</a></li>
<li class="toctree-l1"><a class="reference internal" href="l02_basic_command_line_skills.html">Lesson 2: Basic command line skills</a></li>
<li class="toctree-l1"><a class="reference internal" href="l03_variables_operators_types.html">Lesson 3: Variables, operators, and types</a></li>
<li class="toctree-l1"><a class="reference internal" href="l04_more_operators_and_conditionals.html">Lesson 4: More operators and conditionals</a></li>
<li class="toctree-l1"><a class="reference internal" href="l05_lists_and_tuples.html">Lesson 5: Lists and tuples</a></li>
<li class="toctree-l1"><a class="reference internal" href="l06_iteration.html">Lesson 6: Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="l07_intro_to_functions.html">Lesson 7: Introduction to functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="l08_string_methods.html">Lesson 8: String methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="l09_dictionaries.html">Lesson 9: Dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="l10_packages_and_modules.html">Lesson 10: Packages and modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="l11_file_io.html">Lesson 11: File I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="l12_version_control_with_git.html">Lesson 12: Version control with Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="l13_exceptions_and_error_handling.html">Lesson 13: Errors and Exception handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="l16_style.html">Lesson 16: Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="l17_intro_to_pandas.html">Lesson 17: Introduction to Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="l18_split_apply_combine.html">Lesson 18: Tidy data and split-apply-combine</a></li>
<li class="toctree-l1"><a class="reference internal" href="l19_plotting.html">Lesson 19: Making plots</a></li>
<li class="toctree-l1"><a class="reference internal" href="l20_high_level_plotting.html">Lesson 20: High level plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="l21_intro_to_numpy_and_scipy.html">Lesson 21: Introduction to Numpy and Scipy</a></li>
<li class="toctree-l1"><a class="reference internal" href="l22_plotting_time_series_generated_data.html">Lesson 22: Plotting time series and generated data</a></li>
<li class="toctree-l1"><a class="reference internal" href="l23_random_number_generation.html">Lesson 23: Random number generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="l24_comprehensions.html">Lesson 24: Comprehensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="l25_hackerstats_1.html">Lesson 25: Hacker stats I</a></li>
<li class="toctree-l1"><a class="reference internal" href="l26_hackerstats_2.html">Lesson 26: Hacker stats II</a></li>
<li class="toctree-l1"><a class="reference internal" href="l27_holoviews.html">Lesson 27: High level plotting with HoloViews</a></li>
<li class="toctree-l1"><a class="reference internal" href="l28_overplotting.html">Lesson 28: Dealing with overplotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="l38_intro_to_image_processing.html">Lesson 38: Introduction to image processing with scikit-image</a></li>
<li class="toctree-l1"><a class="reference internal" href="l39_segmentation.html">Lesson 39: Basic image quantification</a></li>
<li class="toctree-l1"><a class="reference internal" href="l32_other_packages_and_languages.html">Lesson 32: Survey of other packages and languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="l33_bootcamp_recap.html">Lesson 33: Bootcamp recap</a></li>
</ul>
<p class="caption"><span class="caption-text">Auxiliary lessons</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Lesson 30: JavaScript for stand-alone Bokeh apps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#JavaScript-and-Bokeh">JavaScript and Bokeh</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Using-ColumnDataSources">Using ColumnDataSources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Example-1:-Exploring-the-Normal-pdf">Example 1: Exploring the Normal pdf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Exploring-a-data-set">Exploring a data set</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Conclusions">Conclusions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Computing-environment">Computing environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="l31_intro_to_scripting.html">Lesson 31: Introduction to scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="l34_more_command_line.html">Lesson 34: More about the command line</a></li>
<li class="toctree-l1"><a class="reference internal" href="l35_regular_expressions.html">Lesson 35: Regular expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="l36_intro_to_oop.html">Lesson 36: Introduction to object-oriented programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="l37_algorithmic_complexity.html">Lesson 37: Algorithmic complexity</a></li>
<li class="toctree-l1"><a class="reference internal" href="l40_serial.html">Lesson 40: Control of external devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="l41_serial_apps.html">Lesson 41. Apps for controlling external devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="l42_control_panels.html">Lesson 42: Control panels</a></li>
<li class="toctree-l1"><a class="reference internal" href="l14_testing_and_tdd.html">Lesson 14: Testing and test-driven development</a></li>
<li class="toctree-l1"><a class="reference internal" href="l15_examples_of_tdd.html">Lesson 15: Examples of TDD</a></li>
<li class="toctree-l1"><a class="reference internal" href="l29_dashboards.html">Lesson 29: Dashboards</a></li>
</ul>
<p class="caption"><span class="caption-text">Exercises</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../exercises/exercise_1/index.html">Exercise 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/exercise_2/index.html">Exercise 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/exercise_3/index.html">Exercise 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/exercise_4/index.html">Exercise 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/exercise_5/index.html">Exercise 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/exercise_6/index.html">Exercise 6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/exercise_7/index.html">Exercise 7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/exercise_8/index.html">Exercise 8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/exercise_9/index.html">Exercise 9</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/exercise_10/index.html">Exercise 10</a></li>
</ul>
<p class="caption"><span class="caption-text">Exercise solutions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../exercise_solutions/exercise_1/index.html">Exercise 1 solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise_solutions/exercise_2/index.html">Exercise 2 solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise_solutions/exercise_3/index.html">Exercise 3 solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise_solutions/exercise_4/index.html">Exercise 4 solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise_solutions/exercise_5/index.html">Exercise 5 solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise_solutions/exercise_6/index.html">Exercise 6 solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise_solutions/exercise_7/index.html">Exercise 7 solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise_solutions/exercise_8/index.html">Exercise 8 solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise_solutions/exercise_9/index.html">Exercise 9 solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercise_solutions/exercise_10/index.html">Exercise 10 solutions</a></li>
</ul>
<p class="caption"><span class="caption-text">Schedule</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../schedule.html">Schedule overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schedule.html#daily-schedule">Daily schedule</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../resources.html">Scientific Python distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html#online-instruction">Online instruction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html#books">Books</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html#griffin-chure-s-templates-for-reproducible-publishing">Griffin Chure’s templates for reproducible publishing</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Programming Bootcamp</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Lesson 30: JavaScript for stand-alone Bokeh apps</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/lessons/l30_javascript_for_bokeh.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Lesson-30:-JavaScript-for-stand-alone-Bokeh-apps">
<h1>Lesson 30: JavaScript for stand-alone Bokeh apps<a class="headerlink" href="#Lesson-30:-JavaScript-for-stand-alone-Bokeh-apps" title="Permalink to this headline">¶</a></h1>
<hr><div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">scipy.stats</span>

<span class="kn">import</span> <span class="nn">bokeh.plotting</span>
<span class="kn">import</span> <span class="nn">bokeh.io</span>

<span class="n">bokeh</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">output_notebook</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="bk-root">
    <a href="https://bokeh.org" target="_blank" class="bk-logo bk-logo-small bk-logo-notebook"></a>
    <span id="1002">Loading BokehJS ...</span>
</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="output_javascript"></div>
<script type="text/javascript">
var element = document.currentScript.previousSibling.previousSibling;

(function(root) {
  function now() {
    return new Date();
  }

  var force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

  var JS_MIME_TYPE = 'application/javascript';
  var HTML_MIME_TYPE = 'text/html';
  var EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  var CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    var script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    var cell = handle.cell;

    var id = cell.output_area._bokeh_element_id;
    var server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      var cmd = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd, {
        iopub: {
          output: function(msg) {
            var id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      var cmd = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    var output_area = handle.output_area;
    var output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    var toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      var bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      var script_attrs = bk_div.children[0].attributes;
      for (var i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      var toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      var props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    var events = require('base/js/events');
    var OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }


  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  var NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    var el = document.getElementById("1002");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }


  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    const hashes = {"https://cdn.bokeh.org/bokeh/release/bokeh-2.3.2.min.js": "XypntL49z55iwGVUW4qsEu83zKL3XEcz0MjuGOQ9SlaaQ68X/g+k1FcioZi7oQAc", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.3.2.min.js": "bEsM86IHGDTLCS0Zod8a8WM6Y4+lafAL/eSiyQcuPzinmWNgNO2/olUF0Z2Dkn5i", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.3.2.min.js": "TX0gSQTdXTTeScqxj6PVQxTiRW8DOoGVwinyi1D3kxv7wuxQ02XkOxv0xwiypcAH"};

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      if (url in hashes) {
        element.crossOrigin = "anonymous";
        element.integrity = "sha384-" + hashes[url];
      }
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }


  var js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-2.3.2.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.3.2.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.3.2.min.js"];
  var css_urls = [];


  var inline_js = [
    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
    function(Bokeh) {


    }
  ];

  function run_inline_js() {

    if (root.Bokeh !== undefined || force === true) {

    for (var i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
    if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      var cell = $(document.getElementById("1002")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }

  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script></div>
</div>
<hr><p>As we have seen when <a class="reference internal" href="l29_dashboards.html"><span class="doc">building dashboards</span></a>, we can build remarkable interactivity in our data displays, allowing for low-effort exploration of data sets. Panel, with Bokeh output, allow us to write Python code that can update our displays as we adjust parameters or select variables. We can also serve up a notebook to get only the data displays we like on their own browser tabs. I hope you recognize how powerful this is for exploring your data sets.</p>
<p>There is a major drawback to this approach, though. In order to interactively explore using the dashboard, you need to have a Python interpreter running, either in the Jupyter notebook or when you serve your dashboards using <code class="docutils literal notranslate"><span class="pre">panel</span> <span class="pre">serve</span></code> on the command line. If you wanted to include an interactive plot in a publication, it would be nice to be able to interact with the plots/dashboard directly in the browser without the reader having to launch a Jupyter notebook or serve it up on their local
machine (and have all of the necessary installations). In some cases, you will just need the Python interpreter for sophisticated dashboards that do involved calculations. But in many cases, with just a little JavaScript, you can make beautiful interactive graphics rendered in pure HTML with JavaScript.</p>
<div class="section" id="JavaScript-and-Bokeh">
<h2>JavaScript and Bokeh<a class="headerlink" href="#JavaScript-and-Bokeh" title="Permalink to this headline">¶</a></h2>
<p>We have been using Bokeh for rendering out plots and dashboards. (Even though we used a Panel interface, the dashboards we have made are rendered with Bokeh.) As we have seen, Bokeh is a Python library for generating graphics that can be visualized and interacted with in the browser. In order to display the graphics and enable the interactions, Bokeh relies on its client-side <a class="reference external" href="https://en.wikipedia.org/wiki/JavaScript">JavaScript</a> library,
<a class="reference external" href="https://docs.bokeh.org/en/latest/docs/dev_guide/bokehjs.html">BokehJS</a>. It is this JavaScript library that handles all of the rendering, zooming, selecting, etc., as well has the widgets. The <strong>callbacks</strong>, which are functions that get executed to update information about the plot based on changes in the widgets (such as computing the values of a smooth curve, as we saw in our exploration of the theoretical model for fold change in gene expression, or selecting pieces of a Pandas data frame,
as we saw in the dashboard for the facial recognition data), are in Python. This is what requires the Python interpreter to be running.</p>
<p>Bokeh allows for pure JavaScript callbacks. And it turns out that if you know just a little JavaScript, you can make your dashboards have full functionality standing alone in the browser without Python running.</p>
<p>So, in this lesson, we will learn a little JavaScript to make our dashboards be totally portable. We will not delve into the details of the language (that would require a complete bootcamp!), but will just give a little syntax. We will do it all in the context of making interactive plots. As you will see, a little JavaScript goes a long way!</p>
</div>
<div class="section" id="Using-ColumnDataSources">
<h2>Using ColumnDataSources<a class="headerlink" href="#Using-ColumnDataSources" title="Permalink to this headline">¶</a></h2>
<p>Let’s look at how we have been building plots with Bokeh so far. To make the plot, I’ll first generate some random data.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">rg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">rg</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now, I’ll make a figure.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">p</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span>
    <span class="n">frame_width</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">frame_height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">x_axis_label</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span>
    <span class="n">y_axis_label</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Then, when it becomes time to populate glyphs, we specify arrays (or lists or columns of data frames) for <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="n">bokeh</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="bk-root" id="6442e5f7-b735-4fd7-816e-7cccbe4ef132" data-root-id="1003"></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="output_javascript"></div>
<script type="text/javascript">
var element = document.currentScript.previousSibling.previousSibling;
(function(root) {
  function embed_document(root) {

  var docs_json = {"46159b71-e949-48ec-aa33-718f192ad63c":{"defs":[],"roots":{"references":[{"attributes":{"below":[{"id":"1012"}],"center":[{"id":"1015"},{"id":"1019"}],"frame_height":250,"frame_width":250,"left":[{"id":"1016"}],"renderers":[{"id":"1037"}],"title":{"id":"1040"},"toolbar":{"id":"1027"},"x_range":{"id":"1004"},"x_scale":{"id":"1008"},"y_range":{"id":"1006"},"y_scale":{"id":"1010"}},"id":"1003","subtype":"Figure","type":"Plot"},{"attributes":{"axis_label":"y","formatter":{"id":"1044"},"major_label_policy":{"id":"1045"},"ticker":{"id":"1017"}},"id":"1016","type":"LinearAxis"},{"attributes":{"axis":{"id":"1016"},"dimension":1,"ticker":null},"id":"1019","type":"Grid"},{"attributes":{},"id":"1021","type":"WheelZoomTool"},{"attributes":{},"id":"1042","type":"AllLabels"},{"attributes":{},"id":"1017","type":"BasicTicker"},{"attributes":{"active_multi":null,"tools":[{"id":"1020"},{"id":"1021"},{"id":"1022"},{"id":"1023"},{"id":"1024"},{"id":"1025"}]},"id":"1027","type":"Toolbar"},{"attributes":{},"id":"1025","type":"HelpTool"},{"attributes":{},"id":"1020","type":"PanTool"},{"attributes":{"overlay":{"id":"1026"}},"id":"1022","type":"BoxZoomTool"},{"attributes":{},"id":"1023","type":"SaveTool"},{"attributes":{},"id":"1041","type":"BasicTickFormatter"},{"attributes":{},"id":"1024","type":"ResetTool"},{"attributes":{"source":{"id":"1034"}},"id":"1038","type":"CDSView"},{"attributes":{},"id":"1047","type":"UnionRenderers"},{"attributes":{},"id":"1048","type":"Selection"},{"attributes":{},"id":"1040","type":"Title"},{"attributes":{},"id":"1045","type":"AllLabels"},{"attributes":{},"id":"1008","type":"LinearScale"},{"attributes":{"bottom_units":"screen","fill_alpha":0.5,"fill_color":"lightgrey","left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","syncable":false,"top_units":"screen"},"id":"1026","type":"BoxAnnotation"},{"attributes":{},"id":"1044","type":"BasicTickFormatter"},{"attributes":{"axis_label":"x","formatter":{"id":"1041"},"major_label_policy":{"id":"1042"},"ticker":{"id":"1013"}},"id":"1012","type":"LinearAxis"},{"attributes":{},"id":"1006","type":"DataRange1d"},{"attributes":{"axis":{"id":"1012"},"ticker":null},"id":"1015","type":"Grid"},{"attributes":{"fill_color":{"value":"#1f77b4"},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y"}},"id":"1035","type":"Circle"},{"attributes":{},"id":"1010","type":"LinearScale"},{"attributes":{"data":{"x":{"__ndarray__":"AAAAAAAACMDByyl4OQUHwIOXU/ByCgbARGN9aKwPBcAFL6fg5RQEwMb60FgfGgPAiMb60FgfAsBJkiRJkiQBwApeTsHLKQDAmFPwcgpe/r8a60NjfWj8v52Cl1Pwcvq/IBrrQ2N9+L+isT401of2vyVJkiRJkvS/p+DlFLyc8r8qeDkFL6fwv1gfGutDY+2/YE7Byyl46b9kfWisD43lv2isD431oeG/4LZt27Zt27/oFLycgpfTv+DlFLycgse/AIjG+tBYr7/Ah8b60FivP+DlFLycgsc/6BS8nIKX0z/Ytm3btm3bP2isD431oeE/ZH1orA+N5T9cTsHLKXjpP1gfGutDY+0/KHg5BS+n8D+o4OUUvJzyPyRJkiRJkvQ/oLE+NNaH9j8gGutDY334P5yCl1Pwcvo/GOtDY31o/D+YU/ByCl7+PwpeTsHLKQBASJIkSZIkAUCIxvrQWB8CQMb60FgfGgNABC+n4OUUBEBEY31orA8FQIKXU/ByCgZAwMspeDkFB0AAAAAAAAAIQA==","dtype":"float64","order":"little","shape":[50]},"y":{"__ndarray__":"f8OJFje9C8AdMPiM06T/v3WHRBzbmQzAsbn0809cCsAiGHkPWjUPwBr4L2qTCAHASEXjfTGiB8D3bPZQfwYEwPopvpRB2uG/Esoe7zb9A8COk/pLPhDyv3AIWNwVogfAG+oq6KKGAMCwAH//gz/6v2YLT42ywtm/LFsXUiFF9r+2ucc6Iz77v7s939kmD+y/1EPAqbHPxb8cvbh/jFXrv/75ZidgpMC/yqL7pKhH878lNW+wji70PxAkflUyXb8/6KDh2QxV6b9BOPLPwn7XP1Td/ReLEvy/ZhA+o8oA+z+uDN8XihrWP2icrsPE/Ni/QOk/kPfamr8VfQNr3bjnP8DJupbIT4K/wlfAqhIf7j/EaUmb0MHzP6dAwSNrePc/lIaagnhw3z/2cjhekpP6P+C9ypuzrKs/Yf5XSwcgA0AMLMe3Vo7uP/vXyDyKIPs/uRU4qs2rA0Bt4p0nkFT7P25ujx+fHQFAz+O31lCoAkCZwkkRvX8JQDMKGuviWAdAQJwm0dHOAEBj4U34PVMJQA==","dtype":"float64","order":"little","shape":[50]}},"selected":{"id":"1048"},"selection_policy":{"id":"1047"}},"id":"1034","type":"ColumnDataSource"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y"}},"id":"1036","type":"Circle"},{"attributes":{},"id":"1004","type":"DataRange1d"},{"attributes":{"data_source":{"id":"1034"},"glyph":{"id":"1035"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1036"},"view":{"id":"1038"}},"id":"1037","type":"GlyphRenderer"},{"attributes":{},"id":"1013","type":"BasicTicker"}],"root_ids":["1003"]},"title":"Bokeh Application","version":"2.3.2"}};
  var render_items = [{"docid":"46159b71-e949-48ec-aa33-718f192ad63c","root_ids":["1003"],"roots":{"1003":"6442e5f7-b735-4fd7-816e-7cccbe4ef132"}}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script></div>
</div>
<p>Let’s now peak under the hood a bit. When we called <code class="docutils literal notranslate"><span class="pre">p.circle()</span></code>, we created a <strong>renderer</strong>, which populates the plot with glyphs. A plot has a list of renderers, which we can access with <code class="docutils literal notranslate"><span class="pre">p.renderes</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">p</span><span class="o">.</span><span class="n">renderers</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[GlyphRenderer(id=&#39;1037&#39;, ...)]
</pre></div></div>
</div>
<p>This is a list of <code class="docutils literal notranslate"><span class="pre">GlyphRenderer</span></code> instances. Each <code class="docutils literal notranslate"><span class="pre">GlyphRenderer</span></code> has a <code class="docutils literal notranslate"><span class="pre">data_source</span></code> attribute, which contains the data that dictate where the glyphs are placed. Let’s look at the <code class="docutils literal notranslate"><span class="pre">data_source</span></code> for the plot we have just made.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">p</span><span class="o">.</span><span class="n">renderers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data_source</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div style="display: table;"><div style="display: table-row;"><div style="display: table-cell;"><b title="bokeh.models.sources.ColumnDataSource">ColumnDataSource</b>(</div><div style="display: table-cell;">id&nbsp;=&nbsp;'1034', <span id="1106" style="cursor: pointer;">&hellip;)</span></div></div><div class="1105" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">data&nbsp;=&nbsp;{'y': {'__ndarray__': 'f8OJFje9C8AdMPiM06T/v3WHRBzbmQzAsbn0809cCsAiGHkPWjUPwBr4L2qTCAHASEXjfTGiB8D3bPZQfwYEwPopvpRB2uG/Esoe7zb9A8COk/pLPhDyv3AIWNwVogfAG+oq6KKGAMCwAH//gz/6v2YLT42ywtm/LFsXUiFF9r+2ucc6Iz77v7s939kmD+y/1EPAqbHPxb8cvbh/jFXrv/75ZidgpMC/yqL7pKhH878lNW+wji70PxAkflUyXb8/6KDh2QxV6b9BOPLPwn7XP1Td/ReLEvy/ZhA+o8oA+z+uDN8XihrWP2icrsPE/Ni/QOk/kPfamr8VfQNr3bjnP8DJupbIT4K/wlfAqhIf7j/EaUmb0MHzP6dAwSNrePc/lIaagnhw3z/2cjhekpP6P+C9ypuzrKs/Yf5XSwcgA0AMLMe3Vo7uP/vXyDyKIPs/uRU4qs2rA0Bt4p0nkFT7P25ujx+fHQFAz+O31lCoAkCZwkkRvX8JQDMKGuviWAdAQJwm0dHOAEBj4U34PVMJQA==', 'shape': (50,), 'dtype': 'float64', 'order': 'little'}, 'x': {'__ndarray__': 'AAAAAAAACMDByyl4OQUHwIOXU/ByCgbARGN9aKwPBcAFL6fg5RQEwMb60FgfGgPAiMb60FgfAsBJkiRJkiQBwApeTsHLKQDAmFPwcgpe/r8a60NjfWj8v52Cl1Pwcvq/IBrrQ2N9+L+isT401of2vyVJkiRJkvS/p+DlFLyc8r8qeDkFL6fwv1gfGutDY+2/YE7Byyl46b9kfWisD43lv2isD431oeG/4LZt27Zt27/oFLycgpfTv+DlFLycgse/AIjG+tBYr7/Ah8b60FivP+DlFLycgsc/6BS8nIKX0z/Ytm3btm3bP2isD431oeE/ZH1orA+N5T9cTsHLKXjpP1gfGutDY+0/KHg5BS+n8D+o4OUUvJzyPyRJkiRJkvQ/oLE+NNaH9j8gGutDY334P5yCl1Pwcvo/GOtDY31o/D+YU/ByCl7+PwpeTsHLKQBASJIkSZIkAUCIxvrQWB8CQMb60FgfGgNABC+n4OUUBEBEY31orA8FQIKXU/ByCgZAwMspeDkFB0AAAAAAAAAIQA==', 'shape': (50,), 'dtype': 'float64', 'order': 'little'}},</div></div><div class="1105" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_event_callbacks&nbsp;=&nbsp;{},</div></div><div class="1105" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_property_callbacks&nbsp;=&nbsp;{},</div></div><div class="1105" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">name&nbsp;=&nbsp;None,</div></div><div class="1105" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">selected&nbsp;=&nbsp;Selection(id='1048', ...),</div></div><div class="1105" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">selection_policy&nbsp;=&nbsp;UnionRenderers(id='1047', ...),</div></div><div class="1105" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">subscribed_events&nbsp;=&nbsp;[],</div></div><div class="1105" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">syncable&nbsp;=&nbsp;True,</div></div><div class="1105" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">tags&nbsp;=&nbsp;[])</div></div></div>
<script>
(function() {
  var expanded = false;
  var ellipsis = document.getElementById("1106");
  ellipsis.addEventListener("click", function() {
    var rows = document.getElementsByClassName("1105");
    for (var i = 0; i < rows.length; i++) {
      var el = rows[i];
      el.style.display = expanded ? "none" : "table-row";
    }
    ellipsis.innerHTML = expanded ? "&hellip;)" : "&lsaquo;&lsaquo;&lsaquo;";
    expanded = !expanded;
  });
})();
</script></div>
</div>
<p>This is a <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> instance. This Bokeh data type is at the heart of many of the plots you can make with Boken and is an object that we can interact directly with using JavaScript. Importantly, the <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> has a <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute that contains the data for the plot stored as a dictionary.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">p</span><span class="o">.</span><span class="n">renderers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data_source</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;x&#39;: array([-3.        , -2.87755102, -2.75510204, -2.63265306, -2.51020408,
        -2.3877551 , -2.26530612, -2.14285714, -2.02040816, -1.89795918,
        -1.7755102 , -1.65306122, -1.53061224, -1.40816327, -1.28571429,
        -1.16326531, -1.04081633, -0.91836735, -0.79591837, -0.67346939,
        -0.55102041, -0.42857143, -0.30612245, -0.18367347, -0.06122449,
         0.06122449,  0.18367347,  0.30612245,  0.42857143,  0.55102041,
         0.67346939,  0.79591837,  0.91836735,  1.04081633,  1.16326531,
         1.28571429,  1.40816327,  1.53061224,  1.65306122,  1.7755102 ,
         1.89795918,  2.02040816,  2.14285714,  2.26530612,  2.3877551 ,
         2.51020408,  2.63265306,  2.75510204,  2.87755102,  3.        ]),
 &#39;y&#39;: array([-3.46739023, -1.97774081, -3.57512495, -3.29507437, -3.90105068,
        -2.12918742, -2.95419596, -2.50317252, -0.5578926 , -2.49863993,
        -1.12896566, -2.95414326, -2.06574041, -1.64050674, -0.40250839,
        -1.39187748, -1.70267032, -0.87684958, -0.17040082, -0.85419297,
        -0.13001635, -1.20499482,  1.26136655,  0.12251582, -0.7916321 ,
         0.36711188, -1.75452718,  1.68769325,  0.34536984, -0.39042777,
        -0.02622592,  0.74131652, -0.00894124,  0.94129308,  1.23481808,
         1.46689905,  0.49123967,  1.66102826,  0.05405198,  2.39063891,
         0.95487533,  1.69544433,  2.45888837,  1.70814529,  2.13946366,
         2.33218544,  3.18737234,  2.91840156,  2.10098613,  3.16564554])}
</pre></div></div>
</div>
<p>Now that we know how the data are represented under the hood in a Bokeh plot and have an understanding of how <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code>s work, we can instead create a plot directly using the <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code>. When a glyph method like <code class="docutils literal notranslate"><span class="pre">p.circle()</span></code> is called, if we use a <code class="docutils literal notranslate"><span class="pre">source</span></code> kwarg, we can specify a <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> explicitly, giving us access to its contents. To instantiate a <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code>, we call <code class="docutils literal notranslate"><span class="pre">bokeh.models.ColumnDataSource</span></code> with a dictionary (or Pandas data frame)
argument that will be used for the data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">p</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span>
    <span class="n">frame_width</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">frame_height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">x_axis_label</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span>
    <span class="n">y_axis_label</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Make the ColumnDataSource</span>
<span class="n">cds</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ColumnDataSource</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span>

<span class="c1"># Populate glyphs</span>
<span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">cds</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>

<span class="n">bokeh</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="bk-root" id="e89e870a-8e02-4323-b77a-12ec0474f3c4" data-root-id="1109"></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="output_javascript"></div>
<script type="text/javascript">
var element = document.currentScript.previousSibling.previousSibling;
(function(root) {
  function embed_document(root) {

  var docs_json = {"db96e717-bd14-43e5-bc95-f6efe0098429":{"defs":[],"roots":{"references":[{"attributes":{"below":[{"id":"1118"}],"center":[{"id":"1121"},{"id":"1125"}],"frame_height":250,"frame_width":250,"left":[{"id":"1122"}],"renderers":[{"id":"1144"}],"title":{"id":"1158"},"toolbar":{"id":"1133"},"x_range":{"id":"1110"},"x_scale":{"id":"1114"},"y_range":{"id":"1112"},"y_scale":{"id":"1116"}},"id":"1109","subtype":"Figure","type":"Plot"},{"attributes":{"axis_label":"x","formatter":{"id":"1159"},"major_label_policy":{"id":"1160"},"ticker":{"id":"1119"}},"id":"1118","type":"LinearAxis"},{"attributes":{},"id":"1158","type":"Title"},{"attributes":{},"id":"1165","type":"UnionRenderers"},{"attributes":{"bottom_units":"screen","fill_alpha":0.5,"fill_color":"lightgrey","left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","syncable":false,"top_units":"screen"},"id":"1132","type":"BoxAnnotation"},{"attributes":{},"id":"1166","type":"Selection"},{"attributes":{"data":{"x":{"__ndarray__":"AAAAAAAACMDByyl4OQUHwIOXU/ByCgbARGN9aKwPBcAFL6fg5RQEwMb60FgfGgPAiMb60FgfAsBJkiRJkiQBwApeTsHLKQDAmFPwcgpe/r8a60NjfWj8v52Cl1Pwcvq/IBrrQ2N9+L+isT401of2vyVJkiRJkvS/p+DlFLyc8r8qeDkFL6fwv1gfGutDY+2/YE7Byyl46b9kfWisD43lv2isD431oeG/4LZt27Zt27/oFLycgpfTv+DlFLycgse/AIjG+tBYr7/Ah8b60FivP+DlFLycgsc/6BS8nIKX0z/Ytm3btm3bP2isD431oeE/ZH1orA+N5T9cTsHLKXjpP1gfGutDY+0/KHg5BS+n8D+o4OUUvJzyPyRJkiRJkvQ/oLE+NNaH9j8gGutDY334P5yCl1Pwcvo/GOtDY31o/D+YU/ByCl7+PwpeTsHLKQBASJIkSZIkAUCIxvrQWB8CQMb60FgfGgNABC+n4OUUBEBEY31orA8FQIKXU/ByCgZAwMspeDkFB0AAAAAAAAAIQA==","dtype":"float64","order":"little","shape":[50]},"y":{"__ndarray__":"f8OJFje9C8AdMPiM06T/v3WHRBzbmQzAsbn0809cCsAiGHkPWjUPwBr4L2qTCAHASEXjfTGiB8D3bPZQfwYEwPopvpRB2uG/Esoe7zb9A8COk/pLPhDyv3AIWNwVogfAG+oq6KKGAMCwAH//gz/6v2YLT42ywtm/LFsXUiFF9r+2ucc6Iz77v7s939kmD+y/1EPAqbHPxb8cvbh/jFXrv/75ZidgpMC/yqL7pKhH878lNW+wji70PxAkflUyXb8/6KDh2QxV6b9BOPLPwn7XP1Td/ReLEvy/ZhA+o8oA+z+uDN8XihrWP2icrsPE/Ni/QOk/kPfamr8VfQNr3bjnP8DJupbIT4K/wlfAqhIf7j/EaUmb0MHzP6dAwSNrePc/lIaagnhw3z/2cjhekpP6P+C9ypuzrKs/Yf5XSwcgA0AMLMe3Vo7uP/vXyDyKIPs/uRU4qs2rA0Bt4p0nkFT7P25ujx+fHQFAz+O31lCoAkCZwkkRvX8JQDMKGuviWAdAQJwm0dHOAEBj4U34PVMJQA==","dtype":"float64","order":"little","shape":[50]}},"selected":{"id":"1166"},"selection_policy":{"id":"1165"}},"id":"1140","type":"ColumnDataSource"},{"attributes":{"fill_color":{"value":"#1f77b4"},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y"}},"id":"1142","type":"Circle"},{"attributes":{},"id":"1110","type":"DataRange1d"},{"attributes":{},"id":"1159","type":"BasicTickFormatter"},{"attributes":{},"id":"1114","type":"LinearScale"},{"attributes":{},"id":"1160","type":"AllLabels"},{"attributes":{},"id":"1112","type":"DataRange1d"},{"attributes":{},"id":"1116","type":"LinearScale"},{"attributes":{},"id":"1119","type":"BasicTicker"},{"attributes":{"axis":{"id":"1118"},"ticker":null},"id":"1121","type":"Grid"},{"attributes":{},"id":"1127","type":"WheelZoomTool"},{"attributes":{"axis_label":"y","formatter":{"id":"1162"},"major_label_policy":{"id":"1163"},"ticker":{"id":"1123"}},"id":"1122","type":"LinearAxis"},{"attributes":{"axis":{"id":"1122"},"dimension":1,"ticker":null},"id":"1125","type":"Grid"},{"attributes":{},"id":"1162","type":"BasicTickFormatter"},{"attributes":{},"id":"1123","type":"BasicTicker"},{"attributes":{"active_multi":null,"tools":[{"id":"1126"},{"id":"1127"},{"id":"1128"},{"id":"1129"},{"id":"1130"},{"id":"1131"}]},"id":"1133","type":"Toolbar"},{"attributes":{},"id":"1163","type":"AllLabels"},{"attributes":{},"id":"1131","type":"HelpTool"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y"}},"id":"1143","type":"Circle"},{"attributes":{},"id":"1126","type":"PanTool"},{"attributes":{},"id":"1129","type":"SaveTool"},{"attributes":{"source":{"id":"1140"}},"id":"1145","type":"CDSView"},{"attributes":{"overlay":{"id":"1132"}},"id":"1128","type":"BoxZoomTool"},{"attributes":{"data_source":{"id":"1140"},"glyph":{"id":"1142"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1143"},"view":{"id":"1145"}},"id":"1144","type":"GlyphRenderer"},{"attributes":{},"id":"1130","type":"ResetTool"}],"root_ids":["1109"]},"title":"Bokeh Application","version":"2.3.2"}};
  var render_items = [{"docid":"db96e717-bd14-43e5-bc95-f6efe0098429","root_ids":["1109"],"roots":{"1109":"e89e870a-8e02-4323-b77a-12ec0474f3c4"}}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script></div>
</div>
<p>Note that when we use the <code class="docutils literal notranslate"><span class="pre">source</span></code> kwarg, we specify the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> values as keys of the dictionary containing the data.</p>
<p>One of the beautiful properties about a <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> is that we can update its data and the plot will also update.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Change the y-data</span>
<span class="n">cds</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

<span class="c1"># Reshow the plot</span>
<span class="n">bokeh</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="bk-root" id="72e50ea2-f8ea-4113-a4cd-9ac91e8387f5" data-root-id="1109"></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="output_javascript"></div>
<script type="text/javascript">
var element = document.currentScript.previousSibling.previousSibling;
(function(root) {
  function embed_document(root) {

  var docs_json = {"ab92a6ed-0a97-46af-8263-eb4512af0200":{"defs":[],"roots":{"references":[{"attributes":{"below":[{"id":"1118"}],"center":[{"id":"1121"},{"id":"1125"}],"frame_height":250,"frame_width":250,"left":[{"id":"1122"}],"renderers":[{"id":"1144"}],"title":{"id":"1158"},"toolbar":{"id":"1133"},"x_range":{"id":"1110"},"x_scale":{"id":"1114"},"y_range":{"id":"1112"},"y_scale":{"id":"1116"}},"id":"1109","subtype":"Figure","type":"Plot"},{"attributes":{"axis_label":"x","formatter":{"id":"1159"},"major_label_policy":{"id":"1160"},"ticker":{"id":"1119"}},"id":"1118","type":"LinearAxis"},{"attributes":{},"id":"1158","type":"Title"},{"attributes":{},"id":"1165","type":"UnionRenderers"},{"attributes":{"bottom_units":"screen","fill_alpha":0.5,"fill_color":"lightgrey","left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","syncable":false,"top_units":"screen"},"id":"1132","type":"BoxAnnotation"},{"attributes":{},"id":"1166","type":"Selection"},{"attributes":{"data":{"x":{"__ndarray__":"AAAAAAAACMDByyl4OQUHwIOXU/ByCgbARGN9aKwPBcAFL6fg5RQEwMb60FgfGgPAiMb60FgfAsBJkiRJkiQBwApeTsHLKQDAmFPwcgpe/r8a60NjfWj8v52Cl1Pwcvq/IBrrQ2N9+L+isT401of2vyVJkiRJkvS/p+DlFLyc8r8qeDkFL6fwv1gfGutDY+2/YE7Byyl46b9kfWisD43lv2isD431oeG/4LZt27Zt27/oFLycgpfTv+DlFLycgse/AIjG+tBYr7/Ah8b60FivP+DlFLycgsc/6BS8nIKX0z/Ytm3btm3bP2isD431oeE/ZH1orA+N5T9cTsHLKXjpP1gfGutDY+0/KHg5BS+n8D+o4OUUvJzyPyRJkiRJkvQ/oLE+NNaH9j8gGutDY334P5yCl1Pwcvo/GOtDY31o/D+YU/ByCl7+PwpeTsHLKQBASJIkSZIkAUCIxvrQWB8CQMb60FgfGgNABC+n4OUUBEBEY31orA8FQIKXU/ByCgZAwMspeDkFB0AAAAAAAAAIQA==","dtype":"float64","order":"little","shape":[50]},"y":{"__ndarray__":"KlZviM/J6z851y6jPaboPzO480Nc8+U/Gc8TtXKo4z8C1Iop17vhP2LuikjQI+A/Xq3EcGau3T9zBvWAlJvbP7rvPtciAdo/8syDkavT2D8xK4v/gwrYP00AWTvBn9c/3LFIVTSQ1z/uG8v6ZdvXP2ycVrGVg9g/PyXIPL2N2T+1/e5RlQHbP0sDfgiV6dw/75ToaeFS3z+O6qb6jibhPy50yh0F9eI/e5YXPmoe5T86hDFPg6znPxw0auh5qOo/22LA5ckZ7j9WYcfjcQLxP7PHbxPHNPM/gvcA/ZCg9T9D4QokaT74P6SwQmIiAvs/9OnFAmja/T+x7ZOwbVgAQN3HzdZptQFABRr/Imj1AkC9gI51SAkEQClCHFTS4gRAVD/LJxB2BUATJaqDjLoFQI1v4v8+rAVAQWLWiABMBUCaBPvBcp8EQKRfLdVesANAPDZnrqeLAkAt5caG/D8BQHLX0V7+uP8/dQ6rjxrf/D+2qTG7nQv6P+HbWxQ4U/c/ruuW6XTF9D8b5yEnzWzyPw==","dtype":"float64","order":"little","shape":[50]}},"selected":{"id":"1166"},"selection_policy":{"id":"1165"}},"id":"1140","type":"ColumnDataSource"},{"attributes":{"fill_color":{"value":"#1f77b4"},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y"}},"id":"1142","type":"Circle"},{"attributes":{},"id":"1110","type":"DataRange1d"},{"attributes":{},"id":"1159","type":"BasicTickFormatter"},{"attributes":{},"id":"1114","type":"LinearScale"},{"attributes":{},"id":"1160","type":"AllLabels"},{"attributes":{},"id":"1112","type":"DataRange1d"},{"attributes":{},"id":"1116","type":"LinearScale"},{"attributes":{},"id":"1119","type":"BasicTicker"},{"attributes":{"axis":{"id":"1118"},"ticker":null},"id":"1121","type":"Grid"},{"attributes":{},"id":"1127","type":"WheelZoomTool"},{"attributes":{"axis_label":"y","formatter":{"id":"1162"},"major_label_policy":{"id":"1163"},"ticker":{"id":"1123"}},"id":"1122","type":"LinearAxis"},{"attributes":{"axis":{"id":"1122"},"dimension":1,"ticker":null},"id":"1125","type":"Grid"},{"attributes":{},"id":"1162","type":"BasicTickFormatter"},{"attributes":{},"id":"1123","type":"BasicTicker"},{"attributes":{"active_multi":null,"tools":[{"id":"1126"},{"id":"1127"},{"id":"1128"},{"id":"1129"},{"id":"1130"},{"id":"1131"}]},"id":"1133","type":"Toolbar"},{"attributes":{},"id":"1163","type":"AllLabels"},{"attributes":{},"id":"1131","type":"HelpTool"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y"}},"id":"1143","type":"Circle"},{"attributes":{},"id":"1126","type":"PanTool"},{"attributes":{},"id":"1129","type":"SaveTool"},{"attributes":{"source":{"id":"1140"}},"id":"1145","type":"CDSView"},{"attributes":{"overlay":{"id":"1132"}},"id":"1128","type":"BoxZoomTool"},{"attributes":{"data_source":{"id":"1140"},"glyph":{"id":"1142"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1143"},"view":{"id":"1145"}},"id":"1144","type":"GlyphRenderer"},{"attributes":{},"id":"1130","type":"ResetTool"}],"root_ids":["1109"]},"title":"Bokeh Application","version":"2.3.2"}};
  var render_items = [{"docid":"ab92a6ed-0a97-46af-8263-eb4512af0200","root_ids":["1109"],"roots":{"1109":"72e50ea2-f8ea-4113-a4cd-9ac91e8387f5"}}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> can also be directly accessed in JavaScript callbacks. This is what will enable us to change the data in a plot in response to changes in widgets.</p>
</div>
<div class="section" id="Example-1:-Exploring-the-Normal-pdf">
<h2>Example 1: Exploring the Normal pdf<a class="headerlink" href="#Example-1:-Exploring-the-Normal-pdf" title="Permalink to this headline">¶</a></h2>
<p>In our <a class="reference internal" href="l29_dashboards.html"><span class="doc">lesson on dashboarding</span></a>, we build an interactive plot of the probability density function (pdf) for the Normal distribution. We used the <code class="docutils literal notranslate"><span class="pre">scipy.stats</span></code> package to get the mathematical expression for the pdf. Since we will code it up in JavaScript, I write it here.</p>
<p><span class="math">\begin{align}
f(x;\mu, \sigma) = \frac{\mathrm{e}^{-(x-\mu)^2/2\sigma^2}}{\sqrt{2\pi\sigma^2}}.
\end{align}</span></p>
<p>I will not recreate the little dashboard we made in the dashboarding lesson for visualizing the Normal pdf, but so that it can stand alone. As a reminder, here is the code we used before to create the dashboard.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">opts</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">show_grid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">frame_height</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">frame_width</span><span class="o">=</span><span class="mi">350</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#1f77b3&quot;</span><span class="p">)</span>

<span class="n">mu_slider</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;µ&quot;</span><span class="p">,</span> <span class="n">start</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span>
<span class="p">)</span>
<span class="n">sigma_slider</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">FloatSlider</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;σ&quot;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>


<span class="nd">@pn</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="n">mu_slider</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">sigma_slider</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plot_normal_pdf</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="n">mu</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">sigma</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">hv</span><span class="o">.</span><span class="n">Curve</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">kdims</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">vdims</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;f(x ; μ, σ)&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span>
        <span class="o">**</span><span class="n">opts</span>
    <span class="p">)</span>


<span class="n">widgets</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span>
    <span class="n">pn</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">30</span><span class="p">),</span>
    <span class="n">mu_slider</span><span class="p">,</span>
    <span class="n">pn</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">),</span>
    <span class="n">sigma_slider</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">plot_normal_pdf</span><span class="p">,</span> <span class="n">pn</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">15</span><span class="p">),</span> <span class="n">widgets</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, let’s build the dashboard with a JavaScript callback so it can stand alone with a Python interpreter running. First, the setup of the setup of the sliders, data, and figure are the same as we would normally do with Bokeh (not HoloViews).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Initial setup of the sliders is the same</span>
<span class="n">mu_slider</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;µ&quot;</span><span class="p">,</span> <span class="n">start</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">sigma_slider</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;σ&quot;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Setup of x and y values is also the same</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">pdf</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Set up the plot as a Bokeh figure</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span>
    <span class="n">frame_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">frame_height</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
    <span class="n">x_axis_label</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>
    <span class="n">y_axis_label</span><span class="o">=</span><span class="s2">&quot;f(x; μ, σ)&quot;</span><span class="p">,</span>
    <span class="n">x_range</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Notice that we are using sliders instantiated from Bokeh as opposed to Panel. That is, we use <code class="docutils literal notranslate"><span class="pre">bokeh.models.Slider()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">pn.widgets.FloatSlider()</span></code>. (Note that the <code class="docutils literal notranslate"><span class="pre">name</span></code> kwarg for a Panel slider is <code class="docutils literal notranslate"><span class="pre">title</span></code> for a Bokeh slider; otherwise the syntax for their instantiation is the same.) I did this because when we render stand-alone HTML pages, there can be some problems with updating axis ranges when updated data in the stand-along HTML app. It’s a bug in Panel that will likely be
fixed soon.</p>
<p>Next, we set up a <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> when we build the plot so we have access to it when manipulate the sliders and use a JavaScript callback.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Use a ColumnDataSource</span>
<span class="n">cds</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ColumnDataSource</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">pdf</span><span class="o">=</span><span class="n">pdf</span><span class="p">))</span>
<span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">cds</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
</div>
<p>Laying out the sliders and plot is the same as before, except we will use Bokeh’s native layout system instead of Panel’s. They really only differ slightly.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Laying out the widgets is the same</span>
<span class="n">widgets</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">column</span><span class="p">(</span>
    <span class="n">bokeh</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">30</span><span class="p">),</span>
    <span class="n">mu_slider</span><span class="p">,</span>
    <span class="n">bokeh</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">),</span>
    <span class="n">sigma_slider</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Lay out with the plot and widgets</span>
<span class="n">layout</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">15</span><span class="p">),</span> <span class="n">widgets</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now, we need to write JavaScript code for the callback. Whenever a slider changes value, we want to recompute the values of the Normal pdf. Here is JavaScript code to do that.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">normalPDF</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">mu</span><span class="p">,</span> <span class="nx">sigma</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">expArg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">mu</span><span class="p">)</span> <span class="o">**</span> <span class="mf">2</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="o">/</span> <span class="nx">sigma</span> <span class="o">**</span> <span class="mf">2</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="o">-</span><span class="nx">expArg</span><span class="p">)</span> <span class="o">/</span> <span class="nx">sigma</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="mf">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// For convenience, get views into the ColumnDataSource data</span>
<span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">cds</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">pdf</span> <span class="o">=</span> <span class="nx">cds</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;pdf&#39;</span><span class="p">];</span>

<span class="c1">// Pull the values off of the sliders</span>
<span class="kd">var</span> <span class="nx">mu</span> <span class="o">=</span> <span class="nx">mu_slider</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">sigma</span> <span class="o">=</span> <span class="nx">sigma_slider</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

<span class="c1">// Loop through and update</span>
<span class="kd">var</span> <span class="nx">xLen</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">xLen</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">pdf</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">normalPDF</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">mu</span><span class="p">,</span> <span class="nx">sigma</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Once the ColumnDataSource is changed, we need to use its</span>
<span class="c1">// .change.emit() method to update the plot</span>
<span class="nx">cds</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">emit</span><span class="p">();</span>
</pre></div>
</div>
<p>Let’s discuss the syntax. First, comments in JavaScript are preceded with <code class="docutils literal notranslate"><span class="pre">//</span></code>. Functions in JavaScript are declared like this:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">funcName</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// function body</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">function</span></code> keyword is followed by the function name, with its arguments in parentheses separated by commas. The function body is then contained between braces.</p>
<p>Within the <code class="docutils literal notranslate"><span class="pre">normalPDF()</span></code> function, we make some calculations. First, we define a variable that is the argument for the exponentiation, <span class="math notranslate nohighlight">\(-(x-\mu)^2/2\sigma^2\)</span>. Note that whenever we use a new variable, it must be preceded by the keyword <code class="docutils literal notranslate"><span class="pre">var</span></code> (or <code class="docutils literal notranslate"><span class="pre">let</span></code>, but we will not get into the differences between those keywords). The arithmetic operators, including raise-to-power, are the same as in Python. We end each statement with a semicolon.</p>
<p>Next comes the <code class="docutils literal notranslate"><span class="pre">return</span></code> statement. Its syntax is just like Python. only difference in the return statement is that we need to use JavaScript’s <code class="docutils literal notranslate"><span class="pre">Math</span></code> module to get access to the exponentiation and square root functions, and also to the value of π. Note that this function is <em>not</em> vectorized. It assumes <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">mu</span></code>, and <code class="docutils literal notranslate"><span class="pre">sigma</span></code> are scalar valued and computes the value of the Normal pdf at that given value of <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>Conveniently, accessing the <code class="docutils literal notranslate"><span class="pre">ColumnDataSource.data</span></code> attribute using JavaScript is exactly as in Python. It is indexed just like you would index a dictionary in Python. For convenience in the above code, we create views into the <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> using <code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">cds.data['x'];</span></code> and <code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">pdf</span> <span class="pre">=</span> <span class="pre">cds.data['pdf'];</span></code>.</p>
<p>Next, we pull the values from the sliders. This is also done as in Python (except with the necessary <code class="docutils literal notranslate"><span class="pre">var</span></code>).</p>
<p>Now that we have access to the data and the slider values, we need to loop through the data in the <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> and update it according to the values of the sliders. A <code class="docutils literal notranslate"><span class="pre">for</span></code> loop in JavaScript typically has the following form.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lastValueOfiYouWant</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// body of for loop</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Inside the parenthetical after the <code class="docutils literal notranslate"><span class="pre">for</span></code> keyword are two semicolons. Before the first is an initialization. After the first semicolon is a conditional statement. The loop will continue so long as that conditional statement gives <code class="docutils literal notranslate"><span class="pre">true</span></code> (in JavaScript the keyword for truth is all lowercase, unlike in Python). Finally, after the second semicolon is the iteration statement. It is executed whenever a trip through the body of the loop concludes. The syntax <code class="docutils literal notranslate"><span class="pre">i++</span></code> is equivalent to Python’s
<code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">+=</span> <span class="pre">1</span></code>.</p>
<p>So, the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop in the above statement loops through each x-value in the plot and updates the value of the Normal pdf using the parameter values we have pulled off of the sliders.</p>
<p>Finally, in order for the plot to update, you need to execute the <code class="docutils literal notranslate"><span class="pre">cds.change.emit()</span></code> function, which pushes the updates of the <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> to the rendered plot.</p>
<p>This code is in JavaScript, so obviously the Python interpreter will not know what to do with it. It is not really used until things get handed off to the BokehJS library. So, we need to store the code as a Python string.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># JavaScript code for the callback stored as a string</span>
<span class="n">jscode</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">function normalPDF(x, mu, sigma) {</span>
<span class="s2">    var expArg = (x - mu) ** 2 / 2.0 / sigma ** 2;</span>
<span class="s2">    return Math.exp(-expArg) / sigma / Math.sqrt(2 * Math.PI);</span>
<span class="s2">}</span>

<span class="s2">// For convenience, get views into the ColumnDataSource data</span>
<span class="s2">var x = cds.data[&#39;x&#39;];</span>
<span class="s2">var pdf = cds.data[&#39;pdf&#39;];</span>

<span class="s2">// Pull the values off of the sliders</span>
<span class="s2">var mu = mu_slider.value;</span>
<span class="s2">var sigma = sigma_slider.value;</span>

<span class="s2">// Loop through and update</span>
<span class="s2">var xLen = x.length;</span>
<span class="s2">for (var i = 0; i &lt; xLen; i++) {</span>
<span class="s2">    pdf[i] = normalPDF(x[i], mu, sigma);</span>
<span class="s2">}</span>

<span class="s2">// Once the ColumnDataSource is changed, we need to use its</span>
<span class="s2">// .change.emit() method to update the plot</span>
<span class="s2">cds.change.emit();</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<p>Now that we have the code, we need to connect it to the sliders. That is, we need to let the slider objects know that when they change, the JavaScript code should be triggered.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">cds</span><span class="o">=</span><span class="n">cds</span><span class="p">,</span> <span class="n">mu_slider</span><span class="o">=</span><span class="n">mu_slider</span><span class="p">,</span> <span class="n">sigma_slider</span><span class="o">=</span><span class="n">sigma_slider</span><span class="p">)</span>

<span class="c1"># Connect the callback to the sliders</span>
<span class="n">mu_slider</span><span class="o">.</span><span class="n">js_on_change</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">CustomJS</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">jscode</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">))</span>
<span class="n">sigma_slider</span><span class="o">.</span><span class="n">js_on_change</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">CustomJS</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">jscode</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">js_on_change()</span></code> method links the sliders to the JavaScript code. The first argument of the <code class="docutils literal notranslate"><span class="pre">js_on_change()</span></code> method is what is changing that will trigger the callback. In this case, we want the callback to be triggered whenever the value of the slider changes. The second argument is a Bokeh <code class="docutils literal notranslate"><span class="pre">CustomJS</span></code> object. This is constructed by specifying the code as a string and the arguments that will be passed to the JavaScript code (in this case the <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> and the two sliders).</p>
<p>Note that if we used Panel-based sliders instead of the Bokeh sliders we are using here, the syntax is</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">slider_created_using_panel</span><span class="o">.</span><span class="n">jscallback</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">jscode</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we are ready to check out our layout!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Display the layout</span>
<span class="n">bokeh</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="bk-root" id="dd6c5b13-17cd-42df-94f3-38218fd698a1" data-root-id="1321"></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="output_javascript"></div>
<script type="text/javascript">
var element = document.currentScript.previousSibling.previousSibling;
(function(root) {
  function embed_document(root) {

  var docs_json = {"aee9feb2-b3e1-47eb-bf00-fc32871cb734":{"defs":[],"roots":{"references":[{"attributes":{"children":[{"id":"1280"},{"id":"1320"},{"id":"1319"}]},"id":"1321","type":"Row"},{"attributes":{"end":5,"js_property_callbacks":{"change:value":[{"id":"1322"}]},"start":-5,"step":0.1,"title":"\u00b5","value":0},"id":"1278","type":"Slider"},{"attributes":{"below":[{"id":"1289"}],"center":[{"id":"1292"},{"id":"1296"}],"frame_height":200,"frame_width":300,"left":[{"id":"1293"}],"renderers":[{"id":"1315"}],"title":{"id":"1347"},"toolbar":{"id":"1304"},"x_range":{"id":"1281"},"x_scale":{"id":"1285"},"y_range":{"id":"1283"},"y_scale":{"id":"1287"}},"id":"1280","subtype":"Figure","type":"Plot"},{"attributes":{"source":{"id":"1311"}},"id":"1316","type":"CDSView"},{"attributes":{},"id":"1354","type":"UnionRenderers"},{"attributes":{"bottom_units":"screen","fill_alpha":0.5,"fill_color":"lightgrey","left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","syncable":false,"top_units":"screen"},"id":"1303","type":"BoxAnnotation"},{"attributes":{"end":10,"start":-10},"id":"1281","type":"Range1d"},{"attributes":{},"id":"1347","type":"Title"},{"attributes":{},"id":"1287","type":"LinearScale"},{"attributes":{},"id":"1297","type":"PanTool"},{"attributes":{"axis_label":"x","formatter":{"id":"1348"},"major_label_policy":{"id":"1349"},"ticker":{"id":"1290"}},"id":"1289","type":"LinearAxis"},{"attributes":{},"id":"1283","type":"DataRange1d"},{"attributes":{},"id":"1285","type":"LinearScale"},{"attributes":{"data":{"pdf":{"__ndarray__":"2tW0RmhBVztb3BOuUJtvO3rj/3s4Q4U7kuDXp/dRnDs0+Cfpr6uyO9+sw5/fXsg73VCEGbF93zuibVVuMiT0O5ossUtxgQk8r28SllP5HzxKg+n9AtczPJ7Yno66X0g8P8CDy6qkXTyZaKKbPNhxPMaK74i2RIU8TqNEpyIYmTw3xBS8kE+tPElsTNok8sA8ZFnlKrxl0zwcQIxd/vrlPPN0CRU6qPg8HBAaIb5hCz1bQsWNGhoePUivDmxAYTA92RpXUKClQT3oUs/qLdJSPYy49o8V32M9mLZyzATFdD0IJ+TQfn2FPbvdRCcqA5Y9/N9doRJSpj2LMhgT22e2PVjxDXDbQ8Y9hbIINSnn1T0fVAOHiVTlPRHSpP9NkPQ9THpclx6gAz6IDhVetIoSPlaUoKGJVyE+bhwbqoQOMD55f0WhRG89Pjmczs1KtUo+Q3mbdp79Vz7XX7ElSVVlPlIaWaSCx3I+w4XZvHddgD67x4VjYDyMPubGMlQjHZg+E9DnZ/dipD7dKAjA7w+xPo2aznzhRbw+GvDcx30wxz4d+c04KdTSPt+x4WDWRN4+iXBsf+AV6D58F+dH+/jyPuWkjEH6lv0+SeJfHqDXBj8176UhzXQRPzAocRWLaRo/+XNF1OLHIz/Lm4GptVQtP5h/Caf+hjU/qKwQrEFIPz/0HocBF4BGP3RWS4pqBVA/CPTjWwyWVj+zw+o0boVfP3Fx+gJDxmU/40UCH93HbT/ivjOIJSl0P3YWCXOuBXs/itAxqGztgT9PQwYsXIyHP2b0XZ3eno4/qaN6tFi1kz8OYuC4ax2ZPxn9RdXXrp8/3rajh5TIoz9Ft1SjS3WoP+K7iFz97q0/8MzXmBwisj+UJQKDtL+1P1pT08a90rk/pkgCBUtavj8KCTkwuajBP9wc3u9oV8Q/O639cx4yxz85xsFrTy/KP1/pyFUOQ80/Mh1zFZ8v0D/wr68G9bnRP78QzdHfN9M/lmKhCFSg1D96PvVtPOrVP820fdjZDNc/E3bPHCUA2D/JGbIRLb3YP3OTurNqPtk/ww/q2gWA2T/CD+raBYDZP3GTurNqPtk/xhmyES292D8Ods8cJQDYP8i0fdjZDNc/dT71bTzq1T+PYqEIVKDUP7cQzdHfN9M/6a+vBvW50T8rHXMVny/QP0/pyFUOQ80/KcbBa08vyj8trf1zHjLHP88c3u9oV8Q//gg5MLmowT+OSAIFS1q+P0JT08a90rk/gSUCg7S/tT/fzNeYHCKyP8S7iFz97q0/ObdUo0t1qD/RtqOHlMijPwX9RdXXrp8//mHguGsdmT+co3q0WLWTP1D0XZ3eno4/PkMGLFyMhz980DGobO2BP2EWCXOuBXs/074ziCUpdD/NRQIf3cdtP2Fx+gJDxmU/m8PqNG6FXz/38+NbDJZWP2hWS4pqBVA/4x6HAReARj+IrBCsQUg/P4N/Caf+hjU/rpuBqbVULT/mc0XU4scjPxcocRWLaRo/JO+lIc10ET8m4l8eoNcGP7ikjEH6lv0+aRfnR/v48j5wcGx/4BXoPsGx4WDWRN4+CvnNOCnU0j4D8NzHfTDHPnCaznzhRbw+zCgIwO8PsT70z+dn92KkPsHGMlQjHZg+nseFY2A8jD6qhdm8d12APjYaWaSCx3I+wl+xJUlVZT4TeZt2nv1XPgOczs1KtUo+Pn9FoURvPT4/HBuqhA4wPlaUoKGJVyE+UA4VXrSKEj5MelyXHqADPr/RpP9NkPQ9H1QDh4lU5T0tsgg1KefVPVjxDXDbQ8Y9MjIYE9tntj38312hElKmPXndRCcqA5Y9CCfk0H59hT1atnLMBMV0PYy49o8V32M9nFLP6i3SUj3ZGldQoKVBPQavDmxAYTA9W0LFjRoaHj2uDxohvmELPfN0CRU6qPg8xT+MXf765TxkWeUqvGXTPAZsTNok8sA8N8QUvJBPrTy3okSnIhiZPMaK74i2RIU8LmiimzzYcTw/wIPLqqRdPD3Yno66X0g8SoPp/QLXMzzvbhKWU/kfPJossUtxgQk8UW1VbjIk9DvdUIQZsX3fO0ysw5/fXsg7NPgn6a+rsjvn39en91GcO3rj/3s4Q4U7ntsTrlCbbzva1bRGaEFXOw==","dtype":"float64","order":"little","shape":[200]},"x":{"__ndarray__":"AAAAAAAAJMD3wEbviswjwO6Bjd4VmSPA5ULUzaBlI8DcAxu9KzIjwNPEYay2/iLAyoWom0HLIsDBRu+KzJciwLgHNnpXZCLAr8h8aeIwIsCmicNYbf0hwJ1KCkj4ySHAlAtRN4OWIcCLzJcmDmMhwIKN3hWZLyHAeU4lBST8IMBwD2z0rsggwGfQsuM5lSDAXpH50sRhIMBVUkDCTy4gwJgmDmO19R/AhqibQcuOH8B0Kikg4ScfwGKstv72wB7AUC5E3QxaHsA+sNG7IvMdwCwyX5o4jB3AGrTseE4lHcAINnpXZL4cwPa3BzZ6VxzA5DmVFJDwG8DSuyLzpYkbwMA9sNG7IhvArr89sNG7GsCcQcuO51QawIrDWG397RnAeEXmSxOHGcBmx3MqKSAZwFRJAQk/uRjAQsuO51RSGMAvTRzGausXwB3PqaSAhBfAC1E3g5YdF8D50sRhrLYWwOdUUkDCTxbA1dbfHtjoFcDDWG397YEVwLHa+tsDGxXAn1yIuhm0FMCN3hWZL00UwHtgo3dF5hPAaeIwVlt/E8BXZL40cRgTwEXmSxOHsRLAM2jZ8ZxKEsAh6mbQsuMRwA9s9K7IfBHA/e2Bjd4VEcDrbw9s9K4QwNnxnEoKSBDAjudUUkDCD8Bq628PbPQOwEbvisyXJg7AIvOlicNYDcD+9sBG74oMwNr62wMbvQvAtv72wEbvCsCSAhJ+ciEKwG4GLTueUwnASgpI+MmFCMAmDmO19bcHwAISfnIh6gbA3hWZL00cBsC6GbTseE4FwJYdz6mkgATAciHqZtCyA8BOJQUk/OQCwCopIOEnFwLABi07nlNJAcDiMFZbf3sAwHhp4jBWW/+/MHEYq62//b/oeE4lBST8v6CAhJ9ciPq/WIi6GbTs+L8QkPCTC1H3v8iXJg5jtfW/gJ9ciLoZ9L84p5ICEn7yv/CuyHxp4vC/UG397YGN7r/AfGniMFbrvzCM1dbfHui/oJtBy47n5L8Qq62/PbDhvwB1M2jZ8dy/4JMLUTeD1r/AsuM5lRTQv0Cjd0XmS8O/AISfXIi6qb8AhZ9ciLqpP4Cjd0XmS8M/4LLjOZUU0D8AlAtRN4PWPyB1M2jZ8dw/IKutvz2w4T+wm0HLjufkP0CM1dbfHug/0Hxp4jBW6z9gbf3tgY3uP/iuyHxp4vA/QKeSAhJ+8j+In1yIuhn0P9CXJg5jtfU/GJDwkwtR9z9giLoZtOz4P6iAhJ9ciPo/8HhOJQUk/D84cRirrb/9P4Bp4jBWW/8/5DBWW397AEAILTueU0kBQCwpIOEnFwJAUCUFJPzkAkB0Iepm0LIDQJgdz6mkgARAvBm07HhOBUDgFZkvTRwGQAQSfnIh6gZAKA5jtfW3B0BMCkj4yYUIQHAGLTueUwlAlAISfnIhCkC4/vbARu8KQNz62wMbvQtAAPfARu+KDEAk86WJw1gNQEjvisyXJg5AbOtvD2z0DkCQ51RSQMIPQNrxnEoKSBBA7G8PbPSuEED+7YGN3hURQBBs9K7IfBFAIupm0LLjEUA0aNnxnEoSQEbmSxOHsRJAWGS+NHEYE0Bq4jBWW38TQHxgo3dF5hNAjt4VmS9NFECgXIi6GbQUQLLa+tsDGxVAxFht/e2BFUDW1t8e2OgVQOhUUkDCTxZA+tLEYay2FkAMUTeDlh0XQB7PqaSAhBdAME0cxmrrF0BEy47nVFIYQFRJAQk/uRhAaMdzKikgGUB4ReZLE4cZQIzDWG397RlAnEHLjudUGkCwvz2w0bsaQMA9sNG7IhtA1Lsi86WJG0DkOZUUkPAbQPi3BzZ6VxxACDZ6V2S+HEActOx4TiUdQCwyX5o4jB1AQLDRuyLzHUBQLkTdDFoeQGSstv72wB5AdCopIOEnH0CIqJtBy44fQJgmDmO19R9AVlJAwk8uIEBekfnSxGEgQGjQsuM5lSBAcA9s9K7IIEB6TiUFJPwgQIKN3hWZLyFAjMyXJg5jIUCUC1E3g5YhQJ5KCkj4ySFAponDWG39IUCwyHxp4jAiQLgHNnpXZCJAwkbvisyXIkDKhaibQcsiQNTEYay2/iJA3AMbvSsyI0DmQtTNoGUjQO6Bjd4VmSNA+MBG74rMI0AAAAAAAAAkQA==","dtype":"float64","order":"little","shape":[200]}},"selected":{"id":"1355"},"selection_policy":{"id":"1354"}},"id":"1311","type":"ColumnDataSource"},{"attributes":{},"id":"1355","type":"Selection"},{"attributes":{},"id":"1290","type":"BasicTicker"},{"attributes":{"axis":{"id":"1289"},"ticker":null},"id":"1292","type":"Grid"},{"attributes":{},"id":"1298","type":"WheelZoomTool"},{"attributes":{"axis_label":"f(x; \u03bc, \u03c3)","formatter":{"id":"1351"},"major_label_policy":{"id":"1352"},"ticker":{"id":"1294"}},"id":"1293","type":"LinearAxis"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","line_width":2,"x":{"field":"x"},"y":{"field":"pdf"}},"id":"1314","type":"Line"},{"attributes":{"axis":{"id":"1293"},"dimension":1,"ticker":null},"id":"1296","type":"Grid"},{"attributes":{},"id":"1294","type":"BasicTicker"},{"attributes":{"active_multi":null,"tools":[{"id":"1297"},{"id":"1298"},{"id":"1299"},{"id":"1300"},{"id":"1301"},{"id":"1302"}]},"id":"1304","type":"Toolbar"},{"attributes":{},"id":"1302","type":"HelpTool"},{"attributes":{"overlay":{"id":"1303"}},"id":"1299","type":"BoxZoomTool"},{"attributes":{"data_source":{"id":"1311"},"glyph":{"id":"1313"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1314"},"view":{"id":"1316"}},"id":"1315","type":"GlyphRenderer"},{"attributes":{},"id":"1348","type":"BasicTickFormatter"},{"attributes":{},"id":"1300","type":"SaveTool"},{"attributes":{},"id":"1301","type":"ResetTool"},{"attributes":{"children":[{"id":"1317"},{"id":"1278"},{"id":"1318"},{"id":"1279"}],"width":200},"id":"1319","type":"Column"},{"attributes":{},"id":"1352","type":"AllLabels"},{"attributes":{},"id":"1349","type":"AllLabels"},{"attributes":{"args":{"cds":{"id":"1311"},"mu_slider":{"id":"1278"},"sigma_slider":{"id":"1279"}},"code":"\nfunction normalPDF(x, mu, sigma) {\n    var expArg = (x - mu) ** 2 / 2.0 / sigma ** 2;\n    return Math.exp(-expArg) / sigma / Math.sqrt(2 * Math.PI);\n}\n\n// For convenience, get views into the ColumnDataSource data\nvar x = cds.data['x'];\nvar pdf = cds.data['pdf'];\n\n// Pull the values off of the sliders\nvar mu = mu_slider.value;\nvar sigma = sigma_slider.value;\n\n// Loop through and update\nvar xLen = x.length;\nfor (var i = 0; i < xLen; i++) {\n    pdf[i] = normalPDF(x[i], mu, sigma);\n}\n\n// Once the ColumnDataSource is changed, we need to use its \n// .change.emit() method to update the plot\ncds.change.emit();\n"},"id":"1322","type":"CustomJS"},{"attributes":{"width":15},"id":"1320","type":"Spacer"},{"attributes":{"line_color":"#1f77b4","line_width":2,"x":{"field":"x"},"y":{"field":"pdf"}},"id":"1313","type":"Line"},{"attributes":{"height":30},"id":"1317","type":"Spacer"},{"attributes":{},"id":"1351","type":"BasicTickFormatter"},{"attributes":{"height":15},"id":"1318","type":"Spacer"},{"attributes":{"end":5,"js_property_callbacks":{"change:value":[{"id":"1323"}]},"start":0.1,"step":0.1,"title":"\u03c3","value":1},"id":"1279","type":"Slider"},{"attributes":{"args":{"cds":{"id":"1311"},"mu_slider":{"id":"1278"},"sigma_slider":{"id":"1279"}},"code":"\nfunction normalPDF(x, mu, sigma) {\n    var expArg = (x - mu) ** 2 / 2.0 / sigma ** 2;\n    return Math.exp(-expArg) / sigma / Math.sqrt(2 * Math.PI);\n}\n\n// For convenience, get views into the ColumnDataSource data\nvar x = cds.data['x'];\nvar pdf = cds.data['pdf'];\n\n// Pull the values off of the sliders\nvar mu = mu_slider.value;\nvar sigma = sigma_slider.value;\n\n// Loop through and update\nvar xLen = x.length;\nfor (var i = 0; i < xLen; i++) {\n    pdf[i] = normalPDF(x[i], mu, sigma);\n}\n\n// Once the ColumnDataSource is changed, we need to use its \n// .change.emit() method to update the plot\ncds.change.emit();\n"},"id":"1323","type":"CustomJS"}],"root_ids":["1321"]},"title":"Bokeh Application","version":"2.3.2"}};
  var render_items = [{"docid":"aee9feb2-b3e1-47eb-bf00-fc32871cb734","root_ids":["1321"],"roots":{"1321":"dd6c5b13-17cd-42df-94f3-38218fd698a1"}}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script></div>
</div>
<p>This is more or less the same about of work we did creating the dashboard with Panel except:</p>
<ol class="arabic simple">
<li><p>We had to use Bokeh to build the sliders and layout (we didn’t <em>have</em> to, but it avoids some Panel bugs I’ve bumped in to recently)</p></li>
<li><p>We used Bokeh instead of HoloViews to build the plot.</p></li>
<li><p>We used a <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> to do so.</p></li>
<li><p>The callbacks were written in JavaScript and linked using <code class="docutils literal notranslate"><span class="pre">js_on_change()</span></code> instead of Panel decorators.</p></li>
</ol>
<p>That last item is the challenging one. But, I hope you can see that it’s not <em>too</em> bad to code up the JavaScript. The payoff is big. You get a stand-alone interactive plot that <em>anyone</em> can view and play with in their browser without even having Python installed.</p>
<p>Let’s now make that HTML document.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">bokeh</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">layout</span><span class="p">,</span> <span class="s2">&quot;normal_pdf_app.html&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/Users/bois/opt/anaconda3/lib/python3.8/site-packages/bokeh/io/saving.py:126: UserWarning: save() called but no resources were supplied and output_file(...) was never called, defaulting to resources.CDN
  warn(&#34;save() called but no resources were supplied and output_file(...) was never called, defaulting to resources.CDN&#34;)
/Users/bois/opt/anaconda3/lib/python3.8/site-packages/bokeh/io/saving.py:139: UserWarning: save() called but no title was supplied and output_file(...) was never called, using default title &#39;Bokeh Plot&#39;
  warn(&#34;save() called but no title was supplied and output_file(...) was never called, using default title &#39;Bokeh Plot&#39;&#34;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/Users/bois/Dropbox/git/programming_bootcamp/2021/content/lessons/normal_pdf_app.html&#39;
</pre></div></div>
</div>
<p>We can again ignore the warnings. We now have our stand-alone app!</p>
<p>(Note that if you wanted to save a Panel layout to HTML, the syntax is <code class="docutils literal notranslate"><span class="pre">layout_made_with_panel.save(&quot;filename.html&quot;)</span></code>.</p>
</div>
<div class="section" id="Exploring-a-data-set">
<h2>Exploring a data set<a class="headerlink" href="#Exploring-a-data-set" title="Permalink to this headline">¶</a></h2>
<p>In the <a class="reference internal" href="l29_dashboards.html"><span class="doc">dashboarding lesson</span></a>, we used data from the <a class="reference external" href="https://doi.org/10.1098/rsos.160321">Beattie, et al.</a> study of how sleep deprivation affects facial matching ability to build a dashboard to explore a data set. We set up a grid matrix of plots in that example. Here, I will demonstrate how to build a simpler dashboard, allowing for a single plot of one variable (e.g., percent correct facial discrimination) versus another (e.g. sleep score). The variables to be
plotted can be selected, as can the categorical variable with which to color the glyphs. All interactions are with JavaScript callbacks, so such a plot could appear in a publication with full interactivity for all readers.</p>
<p>Of course, we’ll start with loading in the data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/gfmt_sleep.csv&#39;</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>

<span class="c1"># Add column for insomnia</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;insomnia&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;sci&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">16</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>participant number</th>
      <th>gender</th>
      <th>age</th>
      <th>correct hit percentage</th>
      <th>correct reject percentage</th>
      <th>percent correct</th>
      <th>confidence when correct hit</th>
      <th>confidence when incorrect hit</th>
      <th>confidence when correct reject</th>
      <th>confidence when incorrect reject</th>
      <th>confidence when correct</th>
      <th>confidence when incorrect</th>
      <th>sci</th>
      <th>psqi</th>
      <th>ess</th>
      <th>insomnia</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>8</td>
      <td>f</td>
      <td>39</td>
      <td>65</td>
      <td>80</td>
      <td>72.5</td>
      <td>91.0</td>
      <td>90.0</td>
      <td>93.0</td>
      <td>83.5</td>
      <td>93.0</td>
      <td>90.0</td>
      <td>9</td>
      <td>13</td>
      <td>2</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>16</td>
      <td>m</td>
      <td>42</td>
      <td>90</td>
      <td>90</td>
      <td>90.0</td>
      <td>75.5</td>
      <td>55.5</td>
      <td>70.5</td>
      <td>50.0</td>
      <td>75.0</td>
      <td>50.0</td>
      <td>4</td>
      <td>11</td>
      <td>7</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>18</td>
      <td>f</td>
      <td>31</td>
      <td>90</td>
      <td>95</td>
      <td>92.5</td>
      <td>89.5</td>
      <td>90.0</td>
      <td>86.0</td>
      <td>81.0</td>
      <td>89.0</td>
      <td>88.0</td>
      <td>10</td>
      <td>9</td>
      <td>3</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>22</td>
      <td>f</td>
      <td>35</td>
      <td>100</td>
      <td>75</td>
      <td>87.5</td>
      <td>89.5</td>
      <td>NaN</td>
      <td>71.0</td>
      <td>80.0</td>
      <td>88.0</td>
      <td>80.0</td>
      <td>13</td>
      <td>8</td>
      <td>20</td>
      <td>True</td>
    </tr>
    <tr>
      <th>4</th>
      <td>27</td>
      <td>f</td>
      <td>74</td>
      <td>60</td>
      <td>65</td>
      <td>62.5</td>
      <td>68.5</td>
      <td>49.0</td>
      <td>61.0</td>
      <td>49.0</td>
      <td>65.0</td>
      <td>49.0</td>
      <td>13</td>
      <td>9</td>
      <td>12</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>To build the dashboard, we will start by setting up the selectors, one for the x-axis variable, one for the y-axis variable, and one for how we will color the glyphs.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Options for x- and y- selector; omit part. num., gender, and insomnia</span>
<span class="n">xy_options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
    <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s2">&quot;participant number&quot;</span><span class="p">,</span> <span class="s2">&quot;gender&quot;</span><span class="p">,</span> <span class="s2">&quot;insomnia&quot;</span><span class="p">])]</span>
<span class="p">)</span>

<span class="n">x_selector</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">xy_options</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;percent correct&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">y_selector</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">xy_options</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;confidence when correct&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">colorby_selector</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;color by&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="s2">&quot;gender&quot;</span><span class="p">,</span> <span class="s2">&quot;insomnia&quot;</span><span class="p">,],</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Next, we can set up the <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code>. In a dashboard like this, I find it is easier to set up a <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> containing the columns that are used in rendering the plot (that is, only three columns, the x-values, the y-values, and the color-values). The color column is a column containing strings representing the colors. We’ll start with a plot of confidence when correct versus percent correct with no additional coloring.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">render_cds</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ColumnDataSource</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;percent correct&quot;</span><span class="p">],</span>
        <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;confidence when correct&quot;</span><span class="p">],</span>
        <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;#1f77b3&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">),</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now that we have the <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> for rendering, we need to convert the data frame <code class="docutils literal notranslate"><span class="pre">df</span></code> into a <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> so we can have access to is using JavaScript.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cds</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now we can make our figure!</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">p</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span>
    <span class="n">frame_height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">frame_width</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
    <span class="n">x_axis_label</span><span class="o">=</span><span class="s2">&quot;percent correct&quot;</span><span class="p">,</span>
    <span class="n">y_axis_label</span><span class="o">=</span><span class="s2">&quot;confidence when correct&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">circle</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span>
    <span class="n">source</span><span class="o">=</span><span class="n">render_cds</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="s2">&quot;color&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Finally, we write our JavaScript code for the callbacks. These will happen whenever the selectors change. Following is the JavaScript code.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Extract what we want to color by from selector</span>
<span class="kd">var</span> <span class="nx">colorby</span> <span class="o">=</span> <span class="nx">colorby_selector</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

<span class="c1">// View of the colors for convenience</span>
<span class="kd">var</span> <span class="nx">colors</span> <span class="o">=</span> <span class="nx">render_cds</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">];</span>

<span class="c1">// Convenient to have the number of data points</span>
<span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">colors</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

<span class="c1">// Update rendered data from full data set</span>
<span class="nx">render_cds</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">cds</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">x_selector</span><span class="p">.</span><span class="nx">value</span><span class="p">];</span>
<span class="nx">render_cds</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">cds</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">y_selector</span><span class="p">.</span><span class="nx">value</span><span class="p">];</span>

<span class="c1">// Update colors</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">colorby</span> <span class="o">===</span> <span class="s1">&#39;none&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">colors</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;#1f77b3&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">colorby</span> <span class="o">===</span> <span class="s1">&#39;gender&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">cds</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">][</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">colors</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;#1f77b3&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">colors</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;#ff7e0e&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">colorby</span> <span class="o">===</span> <span class="s1">&#39;insomnia&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">cds</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;insomnia&#39;</span><span class="p">][</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
            <span class="nx">colors</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;#1f77b3&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">colors</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;#ff7e0e&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Update axis labels to reflect what was selected</span>
<span class="nx">xaxis</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">axis_label</span> <span class="o">=</span> <span class="nx">x_selector</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<span class="nx">yaxis</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">axis_label</span> <span class="o">=</span> <span class="nx">y_selector</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

<span class="nx">render_cds</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">emit</span><span class="p">();</span>
</pre></div>
</div>
<p>Except for the <code class="docutils literal notranslate"><span class="pre">if</span></code> statements, which have new syntax, the code should be self-explanatory. There is the added wrinkle of the <code class="docutils literal notranslate"><span class="pre">xaxis</span></code> and <code class="docutils literal notranslate"><span class="pre">yaxis</span></code> variables, which we will have to pass into the JavaScript code as arguments. These are Bokeh <code class="docutils literal notranslate"><span class="pre">LinearAxis</span></code> objects that we need to access to update the axis labels for what we are plotting.</p>
<p>In JavaScript, an <code class="docutils literal notranslate"><span class="pre">if</span></code>-<code class="docutils literal notranslate"><span class="pre">else</span></code> statement has the structure</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">statement_returning_boolean</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// code to be executed if statement_returning_boolean is true</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">another_statement_returning_boolean</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// code to be executed if another_statement_returning_boolean is true</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="c1">// code to be executed if all booleans were false</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note the use of <code class="docutils literal notranslate"><span class="pre">===</span></code> for the equals comparison operator. In JavaScript, if I use <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">b</span></code>, JavaScript tries to do type comparisons to compare things. <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">==</span> <span class="pre">''</span></code> will evaluate <code class="docutils literal notranslate"><span class="pre">true</span></code>. The <code class="docutils literal notranslate"><span class="pre">===</span></code> operator means that there are no type comparisons. So, <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">===</span> <span class="pre">''</span></code> evaluates <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>Note that we have our JavaScript code, let’s put it to use!</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">jscode</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">// Extract what we want to color by from selector</span>
<span class="s2">var colorby = colorby_selector.value;</span>

<span class="s2">// View of the colors for convenience</span>
<span class="s2">var colors = render_cds.data[&#39;color&#39;];</span>

<span class="s2">// Convenient to have the number of data points</span>
<span class="s2">var n = colors.length;</span>

<span class="s2">// New data</span>
<span class="s2">render_cds.data[&#39;x&#39;] = cds.data[x_selector.value];</span>
<span class="s2">render_cds.data[&#39;y&#39;] = cds.data[y_selector.value];</span>

<span class="s2">// Update colors</span>
<span class="s2">if (colorby === &#39;none&#39;) {</span>
<span class="s2">    for (var i = 0; i &lt; n; i++) {</span>
<span class="s2">        colors[i] = &#39;#1f77b3&#39;;</span>
<span class="s2">    }</span>
<span class="s2">}</span>
<span class="s2">else if (colorby === &#39;gender&#39;) {</span>
<span class="s2">    for (var i = 0; i &lt; n; i++) {</span>
<span class="s2">        if (cds.data[&#39;gender&#39;][i] === &#39;f&#39;) {</span>
<span class="s2">            colors[i] = &#39;#1f77b3&#39;;</span>
<span class="s2">        }</span>
<span class="s2">        else {</span>
<span class="s2">            colors[i] = &#39;#ff7e0e&#39;;</span>
<span class="s2">        }</span>
<span class="s2">    }</span>
<span class="s2">}</span>
<span class="s2">else if (colorby === &#39;insomnia&#39;) {</span>
<span class="s2">    for (var i = 0; i &lt; n; i++) {</span>
<span class="s2">        if (cds.data[&#39;insomnia&#39;][i]) {</span>
<span class="s2">            colors[i] = &#39;#1f77b3&#39;;</span>
<span class="s2">        }</span>
<span class="s2">        else {</span>
<span class="s2">            colors[i] = &#39;#ff7e0e&#39;;</span>
<span class="s2">        }</span>
<span class="s2">    }</span>
<span class="s2">}</span>

<span class="s2">// Update axis labels to reflect what was selected</span>
<span class="s2">xaxis[0].axis_label = x_selector.value;</span>
<span class="s2">yaxis[0].axis_label = y_selector.value;</span>

<span class="s2">render_cds.change.emit();</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">render_cds</span><span class="o">=</span><span class="n">render_cds</span><span class="p">,</span>
    <span class="n">cds</span><span class="o">=</span><span class="n">cds</span><span class="p">,</span>
    <span class="n">colorby_selector</span><span class="o">=</span><span class="n">colorby_selector</span><span class="p">,</span>
    <span class="n">x_selector</span><span class="o">=</span><span class="n">x_selector</span><span class="p">,</span>
    <span class="n">y_selector</span><span class="o">=</span><span class="n">y_selector</span><span class="p">,</span>
    <span class="n">xaxis</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span>
    <span class="n">yaxis</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">yaxis</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Note that I have put both data sources, the selectors, and the <code class="docutils literal notranslate"><span class="pre">p.axis</span></code> and <code class="docutils literal notranslate"><span class="pre">p.yaxis</span></code> objects as arguments to the JavaScript code. Now we can link the callbacks.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">colorby_selector</span><span class="o">.</span><span class="n">js_on_change</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">CustomJS</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">jscode</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">))</span>
<span class="n">x_selector</span><span class="o">.</span><span class="n">js_on_change</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">CustomJS</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">jscode</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">))</span>
<span class="n">y_selector</span><span class="o">.</span><span class="n">js_on_change</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">CustomJS</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">jscode</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>And finally, let’s lay it out!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">layout</span> <span class="o">=</span> <span class="n">bokeh</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">row</span><span class="p">(</span>
    <span class="n">p</span><span class="p">,</span>
    <span class="n">bokeh</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">15</span><span class="p">),</span>
    <span class="n">bokeh</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">column</span><span class="p">(</span>
        <span class="n">x_selector</span><span class="p">,</span>
        <span class="n">bokeh</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">),</span>
        <span class="n">y_selector</span><span class="p">,</span>
        <span class="n">bokeh</span><span class="o">.</span><span class="n">layouts</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">),</span>
        <span class="n">colorby_selector</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">bokeh</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div class="bk-root" id="6869ea7f-08ad-483e-adf4-f421088ece7f" data-root-id="1571"></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="output_javascript"></div>
<script type="text/javascript">
var element = document.currentScript.previousSibling.previousSibling;
(function(root) {
  function embed_document(root) {

  var docs_json = {"f8fbcf71-a69f-4b94-b088-617867eaab0b":{"defs":[],"roots":{"references":[{"attributes":{"children":[{"id":"1528"},{"id":"1567"},{"id":"1570"}]},"id":"1571","type":"Row"},{"attributes":{"width":15},"id":"1567","type":"Spacer"},{"attributes":{},"id":"1546","type":"WheelZoomTool"},{"attributes":{},"id":"1535","type":"LinearScale"},{"attributes":{},"id":"1616","type":"UnionRenderers"},{"attributes":{"children":[{"id":"1523"},{"id":"1568"},{"id":"1524"},{"id":"1569"},{"id":"1525"}]},"id":"1570","type":"Column"},{"attributes":{},"id":"1607","type":"BasicTickFormatter"},{"attributes":{},"id":"1617","type":"Selection"},{"attributes":{"args":{"cds":{"id":"1527"},"colorby_selector":{"id":"1525"},"render_cds":{"id":"1526"},"x_selector":{"id":"1523"},"xaxis":[{"id":"1537"}],"y_selector":{"id":"1524"},"yaxis":[{"id":"1541"}]},"code":"\n// Extract what we want to color by from selector\nvar colorby = colorby_selector.value;\n\n// View of the colors for convenience\nvar colors = render_cds.data['color'];\n\n// Convenient to have the number of data points\nvar n = colors.length;\n\n// New data\nrender_cds.data['x'] = cds.data[x_selector.value];\nrender_cds.data['y'] = cds.data[y_selector.value];\n\n// Update colors\nif (colorby === 'none') {\n    for (var i = 0; i < n; i++) {\n        colors[i] = '#1f77b3';\n    }\n}\nelse if (colorby === 'gender') {\n    for (var i = 0; i < n; i++) {\n        if (cds.data['gender'][i] === 'f') {\n            colors[i] = '#1f77b3';\n        }\n        else {\n            colors[i] = '#ff7e0e';\n        }\n    }\n}\nelse if (colorby === 'insomnia') {\n    for (var i = 0; i < n; i++) {\n        if (cds.data['insomnia'][i]) {\n            colors[i] = '#1f77b3';\n        }\n        else {\n            colors[i] = '#ff7e0e';\n        }\n    }\n}\n\n// Update axis labels to reflect what was selected\nxaxis[0].axis_label = x_selector.value;\nyaxis[0].axis_label = y_selector.value;\n\nrender_cds.change.emit();\n"},"id":"1565","type":"CustomJS"},{"attributes":{"axis_label":"confidence when correct","formatter":{"id":"1610"},"major_label_policy":{"id":"1611"},"ticker":{"id":"1542"}},"id":"1541","type":"LinearAxis"},{"attributes":{},"id":"1608","type":"AllLabels"},{"attributes":{"data":{"color":["#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3","#1f77b3"],"x":{"__ndarray__":"AAAAAAAgUkAAAAAAAIBWQAAAAAAAIFdAAAAAAADgVUAAAAAAAEBPQAAAAAAAAElAAAAAAACgVEAAAAAAAOBQQAAAAAAAgFZAAAAAAADAUkAAAAAAAEBPQAAAAAAAwFdAAAAAAAAAVEAAAAAAAABUQAAAAAAAQFBAAAAAAACAUUAAAAAAAIBRQAAAAAAAAFRAAAAAAABAVUAAAAAAAMBSQAAAAAAAgFFAAAAAAABgWEAAAAAAAOBVQAAAAAAAgEZAAAAAAACAUUAAAAAAACBSQAAAAAAAQFVAAAAAAADAUkAAAAAAAOBQQAAAAAAAwFdAAAAAAADgVUAAAAAAACBXQAAAAAAAgFZAAAAAAAAAWUAAAAAAAIBRQAAAAAAAQFVAAAAAAABgU0AAAAAAACBXQAAAAAAAQFVAAAAAAADATEAAAAAAACBXQAAAAAAAQFBAAAAAAADAV0AAAAAAAGBTQAAAAAAAAFRAAAAAAACAVkAAAAAAAABUQAAAAAAA4FVAAAAAAAAgV0AAAAAAAMBSQAAAAAAA4FBAAAAAAABgU0AAAAAAACBSQAAAAAAAIFJAAAAAAABAVUAAAAAAAOBVQAAAAAAA4FVAAAAAAACAVkAAAAAAAOBVQAAAAAAAAFRAAAAAAACAVkAAAAAAAABUQAAAAAAAQFVAAAAAAABAVUAAAAAAAGBTQAAAAAAAQFVAAAAAAABAVUAAAAAAAEBVQAAAAAAAYFNAAAAAAACAVkAAAAAAAABZQAAAAAAAQFVAAAAAAADgVUAAAAAAAGBYQAAAAAAAIFdAAAAAAAAAWUAAAAAAAABOQAAAAAAAwFdAAAAAAABgU0AAAAAAAGBTQAAAAAAAoFRAAAAAAAAAREAAAAAAAOBVQAAAAAAAQFVAAAAAAADgVUAAAAAAAGBTQAAAAAAAQE9AAAAAAAAgUkAAAAAAAEBVQAAAAAAAIFdAAAAAAABAVUAAAAAAACBSQAAAAAAAgFZAAAAAAACAVkAAAAAAAIBLQAAAAAAA4FVAAAAAAAAATkAAAAAAAGBTQAAAAAAA4FVAAAAAAADAUkAAAAAAAIBRQAAAAAAAQE9A","dtype":"float64","order":"little","shape":[102]},"y":{"__ndarray__":"AAAAAABAV0AAAAAAAMBSQAAAAAAAQFZAAAAAAAAAVkAAAAAAAEBQQAAAAAAAIFBAAAAAAACAUEAAAAAAAABPQAAAAAAAAFFAAAAAAADAUUAAAAAAAIBUQAAAAAAAAFNAAAAAAADgU0AAAAAAAIBLQAAAAAAAQFVAAAAAAACAUUAAAAAAAEBLQAAAAAAAIFZAAAAAAADgVUAAAAAAAABZQAAAAAAAQFNAAAAAAAAAWUAAAAAAAABUQAAAAAAAYFFAAAAAAABAVEAAAAAAAIBJQAAAAAAAoFNAAAAAAACATEAAAAAAAABOQAAAAAAAAFRAAAAAAADAWEAAAAAAAIBTQAAAAAAAoFNAAAAAAACAVkAAAAAAAIBRQAAAAAAAgFJAAAAAAACAR0AAAAAAAABKQAAAAAAAAFVAAAAAAACAT0AAAAAAAABPQAAAAAAAwE1AAAAAAADgUkAAAAAAAIBTQAAAAAAAgE9AAAAAAABAVEAAAAAAAAA4QAAAAAAAAElAAAAAAABAVEAAAAAAAMBQQAAAAAAAQFNAAAAAAAAAWUAAAAAAAABRQAAAAAAAAEhAAAAAAACAUkAAAAAAAIBUQAAAAAAAwFBAAAAAAACgVEAAAAAAAMBQQAAAAAAAAFZAAAAAAADAVEAAAAAAAMBPQAAAAAAAIFRAAAAAAADAUUAAAAAAAMBXQAAAAAAAoFNAAAAAAABASkAAAAAAAEBRQAAAAAAAgE5AAAAAAACAUEAAAAAAAIBSQAAAAAAAAFdAAAAAAAAAVEAAAAAAAABXQAAAAAAAwFRAAAAAAABATkAAAAAAACBSQAAAAAAAYFhAAAAAAAAAUUAAAAAAAMBQQAAAAAAAQFBAAAAAAACAVEAAAAAAAMBSQAAAAAAAgFdAAAAAAABAU0AAAAAAAABXQAAAAAAAQFRAAAAAAAAATUAAAAAAAOBWQAAAAAAAAFlAAAAAAABAVUAAAAAAAIBSQAAAAAAA4FNAAAAAAACgUUAAAAAAAABSQAAAAAAAQFVAAAAAAAAAUEAAAAAAAEBTQAAAAAAAgFJAAAAAAABAUEAAAAAAAEBUQAAAAAAAQFRA","dtype":"float64","order":"little","shape":[102]}},"selected":{"id":"1614"},"selection_policy":{"id":"1613"}},"id":"1526","type":"ColumnDataSource"},{"attributes":{"axis":{"id":"1541"},"dimension":1,"ticker":null},"id":"1544","type":"Grid"},{"attributes":{"bottom_units":"screen","fill_alpha":0.5,"fill_color":"lightgrey","left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","syncable":false,"top_units":"screen"},"id":"1551","type":"BoxAnnotation"},{"attributes":{},"id":"1542","type":"BasicTicker"},{"attributes":{},"id":"1550","type":"HelpTool"},{"attributes":{},"id":"1538","type":"BasicTicker"},{"attributes":{"axis":{"id":"1537"},"ticker":null},"id":"1540","type":"Grid"},{"attributes":{"fill_color":{"field":"color"},"line_color":{"field":"color"},"x":{"field":"x"},"y":{"field":"y"}},"id":"1560","type":"Circle"},{"attributes":{},"id":"1545","type":"PanTool"},{"attributes":{},"id":"1610","type":"BasicTickFormatter"},{"attributes":{},"id":"1548","type":"SaveTool"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"field":"color"},"line_alpha":{"value":0.1},"line_color":{"field":"color"},"x":{"field":"x"},"y":{"field":"y"}},"id":"1561","type":"Circle"},{"attributes":{},"id":"1549","type":"ResetTool"},{"attributes":{},"id":"1531","type":"DataRange1d"},{"attributes":{},"id":"1611","type":"AllLabels"},{"attributes":{"js_property_callbacks":{"change:value":[{"id":"1564"}]},"options":["none","gender","insomnia"],"title":"color by","value":"none","width":200},"id":"1525","type":"Select"},{"attributes":{"source":{"id":"1526"}},"id":"1563","type":"CDSView"},{"attributes":{"js_property_callbacks":{"change:value":[{"id":"1565"}]},"options":["age","correct hit percentage","correct reject percentage","percent correct","confidence when correct hit","confidence when incorrect hit","confidence when correct reject","confidence when incorrect reject","confidence when correct","confidence when incorrect","sci","psqi","ess"],"title":"x","value":"percent correct","width":200},"id":"1523","type":"Select"},{"attributes":{"js_property_callbacks":{"change:value":[{"id":"1566"}]},"options":["age","correct hit percentage","correct reject percentage","percent correct","confidence when correct hit","confidence when incorrect hit","confidence when correct reject","confidence when incorrect reject","confidence when correct","confidence when incorrect","sci","psqi","ess"],"title":"y","value":"confidence when correct","width":200},"id":"1524","type":"Select"},{"attributes":{"data_source":{"id":"1526"},"glyph":{"id":"1560"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1561"},"view":{"id":"1563"}},"id":"1562","type":"GlyphRenderer"},{"attributes":{"args":{"cds":{"id":"1527"},"colorby_selector":{"id":"1525"},"render_cds":{"id":"1526"},"x_selector":{"id":"1523"},"xaxis":[{"id":"1537"}],"y_selector":{"id":"1524"},"yaxis":[{"id":"1541"}]},"code":"\n// Extract what we want to color by from selector\nvar colorby = colorby_selector.value;\n\n// View of the colors for convenience\nvar colors = render_cds.data['color'];\n\n// Convenient to have the number of data points\nvar n = colors.length;\n\n// New data\nrender_cds.data['x'] = cds.data[x_selector.value];\nrender_cds.data['y'] = cds.data[y_selector.value];\n\n// Update colors\nif (colorby === 'none') {\n    for (var i = 0; i < n; i++) {\n        colors[i] = '#1f77b3';\n    }\n}\nelse if (colorby === 'gender') {\n    for (var i = 0; i < n; i++) {\n        if (cds.data['gender'][i] === 'f') {\n            colors[i] = '#1f77b3';\n        }\n        else {\n            colors[i] = '#ff7e0e';\n        }\n    }\n}\nelse if (colorby === 'insomnia') {\n    for (var i = 0; i < n; i++) {\n        if (cds.data['insomnia'][i]) {\n            colors[i] = '#1f77b3';\n        }\n        else {\n            colors[i] = '#ff7e0e';\n        }\n    }\n}\n\n// Update axis labels to reflect what was selected\nxaxis[0].axis_label = x_selector.value;\nyaxis[0].axis_label = y_selector.value;\n\nrender_cds.change.emit();\n"},"id":"1566","type":"CustomJS"},{"attributes":{},"id":"1606","type":"Title"},{"attributes":{},"id":"1533","type":"LinearScale"},{"attributes":{"axis_label":"percent correct","formatter":{"id":"1607"},"major_label_policy":{"id":"1608"},"ticker":{"id":"1538"}},"id":"1537","type":"LinearAxis"},{"attributes":{"data":{"age":[39,42,31,35,74,61,32,62,33,53,41,36,40,24,32,40,61,42,31,28,26,45,28,44,28,42,45,16,21,18,28,38,17,25,22,41,53,43,23,19,45,43,35,24,64,36,35,43,44,29,22,46,35,53,29,31,21,42,23,54,24,21,21,43,50,53,16,67,36,34,42,46,69,31,44,25,45,47,33,18,74,21,45,37,41,41,34,39,18,31,26,66,62,22,41,46,56,23,70,24,40,33],"confidence when correct":{"__ndarray__":"AAAAAABAV0AAAAAAAMBSQAAAAAAAQFZAAAAAAAAAVkAAAAAAAEBQQAAAAAAAIFBAAAAAAACAUEAAAAAAAABPQAAAAAAAAFFAAAAAAADAUUAAAAAAAIBUQAAAAAAAAFNAAAAAAADgU0AAAAAAAIBLQAAAAAAAQFVAAAAAAACAUUAAAAAAAEBLQAAAAAAAIFZAAAAAAADgVUAAAAAAAABZQAAAAAAAQFNAAAAAAAAAWUAAAAAAAABUQAAAAAAAYFFAAAAAAABAVEAAAAAAAIBJQAAAAAAAoFNAAAAAAACATEAAAAAAAABOQAAAAAAAAFRAAAAAAADAWEAAAAAAAIBTQAAAAAAAoFNAAAAAAACAVkAAAAAAAIBRQAAAAAAAgFJAAAAAAACAR0AAAAAAAABKQAAAAAAAAFVAAAAAAACAT0AAAAAAAABPQAAAAAAAwE1AAAAAAADgUkAAAAAAAIBTQAAAAAAAgE9AAAAAAABAVEAAAAAAAAA4QAAAAAAAAElAAAAAAABAVEAAAAAAAMBQQAAAAAAAQFNAAAAAAAAAWUAAAAAAAABRQAAAAAAAAEhAAAAAAACAUkAAAAAAAIBUQAAAAAAAwFBAAAAAAACgVEAAAAAAAMBQQAAAAAAAAFZAAAAAAADAVEAAAAAAAMBPQAAAAAAAIFRAAAAAAADAUUAAAAAAAMBXQAAAAAAAoFNAAAAAAABASkAAAAAAAEBRQAAAAAAAgE5AAAAAAACAUEAAAAAAAIBSQAAAAAAAAFdAAAAAAAAAVEAAAAAAAABXQAAAAAAAwFRAAAAAAABATkAAAAAAACBSQAAAAAAAYFhAAAAAAAAAUUAAAAAAAMBQQAAAAAAAQFBAAAAAAACAVEAAAAAAAMBSQAAAAAAAgFdAAAAAAABAU0AAAAAAAABXQAAAAAAAQFRAAAAAAAAATUAAAAAAAOBWQAAAAAAAAFlAAAAAAABAVUAAAAAAAIBSQAAAAAAA4FNAAAAAAACgUUAAAAAAAABSQAAAAAAAQFVAAAAAAAAAUEAAAAAAAEBTQAAAAAAAgFJAAAAAAABAUEAAAAAAAEBUQAAAAAAAQFRA","dtype":"float64","order":"little","shape":[102]},"confidence when correct hit":{"__ndarray__":"AAAAAADAVkAAAAAAAOBSQAAAAAAAYFZAAAAAAABgVkAAAAAAACBRQAAAAAAAwFFAAAAAAADAUEAAAAAAAABLQAAAAAAAoFFAAAAAAACgUkAAAAAAAIBUQAAAAAAAIFNAAAAAAAAAVEAAAAAAAABNQAAAAAAAQFVAAAAAAABAUUAAAAAAAGBRQAAAAAAAwFVAAAAAAAAAV0AAAAAAAABZQAAAAAAAgFFAAAAAAAAAWUAAAAAAAGBWQAAAAAAAAE9AAAAAAADAVUAAAAAAAMBJQAAAAAAAwFJAAAAAAACAUUAAAAAAAMBPQAAAAAAAIFNAAAAAAAAAWUAAAAAAAEBTQAAAAAAAIFRAAAAAAACAVkAAAAAAAIBRQAAAAAAAIFNAAAAAAAAAREAAAAAAAABKQAAAAAAAAFZAAAAAAAAAT0AAAAAAAABRQAAAAAAAgE1AAAAAAADgUkAAAAAAAABRQAAAAAAAAElAAAAAAAAAVkAAAAAAAIA9QAAAAAAAYFBAAAAAAADAVEAAAAAAAMBQQAAAAAAAgFNAAAAAAAAgUkAAAAAAAEBPQAAAAAAAAEtAAAAAAADAUkAAAAAAAIBUQAAAAAAAgFBAAAAAAADAVEAAAAAAAMBQQAAAAAAAgFZAAAAAAABAWEAAAAAAAEBQQAAAAAAAAFVAAAAAAACAUkAAAAAAACBXQAAAAAAAAFVAAAAAAACAS0AAAAAAAIBRQAAAAAAA4FBAAAAAAABATUAAAAAAAKBSQAAAAAAAAFdAAAAAAAAAVEAAAAAAAIBYQAAAAAAAwFVAAAAAAADATkAAAAAAACBUQAAAAAAAAFlAAAAAAACAUUAAAAAAAOBQQAAAAAAAgFBAAAAAAACgVkAAAAAAAIBSQAAAAAAA4FdAAAAAAAAAVEAAAAAAAKBXQAAAAAAAQFRAAAAAAACATEAAAAAAAEBXQAAAAAAAAFlAAAAAAABAVUAAAAAAAOBQQAAAAAAAQFRAAAAAAACAUEAAAAAAAIBLQAAAAAAAgFZAAAAAAACAT0AAAAAAAEBTQAAAAAAAYFBAAAAAAADATkAAAAAAAIBKQAAAAAAAAFRA","dtype":"float64","order":"little","shape":[102]},"confidence when correct reject":{"__ndarray__":"AAAAAABAV0AAAAAAAKBRQAAAAAAAgFVAAAAAAADAUUAAAAAAAIBOQAAAAAAAAD9AAAAAAACAUEAAAAAAAEBQQAAAAAAAIFBAAAAAAABATkAAAAAAAEBSQAAAAAAAwFJAAAAAAADAU0AAAAAAAIBIQAAAAAAAQFVAAAAAAACAUUAAAAAAAEBGQAAAAAAAoFZAAAAAAABAVEAAAAAAAABZQAAAAAAAgFRAAAAAAAAAWUAAAAAAAMBQQAAAAAAAwFVAAAAAAAAAUUAAAAAAAIBFQAAAAAAAAFRAAAAAAAAAS0AAAAAAAABJQAAAAAAAAFRAAAAAAACAV0AAAAAAAMBTQAAAAAAAIFNAAAAAAABAVUAAAAAAAIBRQAAAAAAA4FBAAAAAAAAATEAAAAAAAIBIQAAAAAAAoFFAAAAAAACAUEAAAAAAAIBOQAAAAAAAAFBAAAAAAACgUkAAAAAAAABUQAAAAAAAgFBAAAAAAACAUEAAAAAAAAAzQAAAAAAAgERAAAAAAADAU0AAAAAAAEBQQAAAAAAAQFNAAAAAAAAAWUAAAAAAAEBTQAAAAAAAwEdAAAAAAAAgUEAAAAAAAEBUQAAAAAAAgFFAAAAAAAAgVEAAAAAAAEBRQAAAAAAAYFNAAAAAAACAUkAAAAAAAABMQAAAAAAAYFJAAAAAAAAAUUAAAAAAAMBXQAAAAAAAAFFAAAAAAAAASUAAAAAAAEBRQAAAAAAAgEtAAAAAAABgUkAAAAAAAIBSQAAAAAAAAFdAAAAAAACgU0AAAAAAAIBWQAAAAAAAQFFAAAAAAABATUAAAAAAAIBPQAAAAAAA4FFAAAAAAABATUAAAAAAAIBQQAAAAAAAgE9AAAAAAACgUkAAAAAAAABTQAAAAAAA4FRAAAAAAACAUUAAAAAAAIBVQAAAAAAAwFFAAAAAAADATUAAAAAAAMBWQAAAAAAAAFlAAAAAAACAVEAAAAAAAIBSQAAAAAAAoFJAAAAAAAAAUkAAAAAAAABUQAAAAAAAAFRAAAAAAADgUEAAAAAAAEBTQAAAAAAAwFVAAAAAAACAUUAAAAAAAABVQAAAAAAAAD9A","dtype":"float64","order":"little","shape":[102]},"confidence when incorrect":{"__ndarray__":"AAAAAACAVkAAAAAAAABJQAAAAAAAAFZAAAAAAAAAVEAAAAAAAIBIQAAAAAAAoFFAAAAAAAAAUEAAAAAAAIBOQAAAAAAAIFNAAAAAAABAUEAAAAAAAABQQAAAAAAA4FJAAAAAAACAT0AAAAAAAIBNQAAAAAAA4FRAAAAAAAAATEAAAAAAAEBSQAAAAAAAAFBAAAAAAAAATkAAAAAAAABZQAAAAAAAoFFAAAAAAAAAWUAAAAAAAABOQAAAAAAAYFJAAAAAAAAAS0AAAAAAAIBIQAAAAAAAwFBAAAAAAABAS0AAAAAAAABJQAAAAAAAwFRAAAAAAABAUEAAAAAAAABCQAAAAAAA4FBAAAAAAAAA+H8AAAAAAIBRQAAAAAAAwEtAAAAAAAAARkAAAAAAAAA9QAAAAAAAQEtAAAAAAAAASUAAAAAAAABLQAAAAAAAgExAAAAAAADAQUAAAAAAAMBQQAAAAAAAgDhAAAAAAADAT0AAAAAAAIBBQAAAAAAAgEZAAAAAAAAAS0AAAAAAAIBKQAAAAAAAAFVAAAAAAADAVkAAAAAAAAA/QAAAAAAAgElAAAAAAACARUAAAAAAAIBIQAAAAAAAAD1AAAAAAAAAU0AAAAAAAABEQAAAAAAAwFNAAAAAAADAS0AAAAAAAABRQAAAAAAAQFBAAAAAAAAAUUAAAAAAAEBQQAAAAAAAAE1AAAAAAACAQUAAAAAAAMBNQAAAAAAAAElAAAAAAADAR0AAAAAAAAD4fwAAAAAAYFJAAAAAAACAUUAAAAAAAABEQAAAAAAAwFBAAAAAAAAA+H8AAAAAAMBOQAAAAAAAwFRAAAAAAAAAREAAAAAAAIBKQAAAAAAAgEtAAAAAAABAVEAAAAAAAABQQAAAAAAAwFFAAAAAAACATUAAAAAAAMBQQAAAAAAAAE1AAAAAAAAASUAAAAAAAMBWQAAAAAAAAElAAAAAAABAVUAAAAAAAABQQAAAAAAAgFRAAAAAAADATUAAAAAAAABOQAAAAAAAwFJAAAAAAADATUAAAAAAAIBSQAAAAAAAAFRAAAAAAABAVEAAAAAAAIBJQAAAAAAAQFJA","dtype":"float64","order":"little","shape":[102]},"confidence when incorrect hit":{"__ndarray__":"AAAAAACAVkAAAAAAAMBLQAAAAAAAgFZAAAAAAAAA+H8AAAAAAIBIQAAAAAAAgE9AAAAAAABATEAAAAAAAIBCQAAAAAAAIFNAAAAAAAAA+H8AAAAAAMBOQAAAAAAA4FJAAAAAAABAVkAAAAAAAABJQAAAAAAAQFRAAAAAAAAATEAAAAAAAAD4fwAAAAAAAFJAAAAAAAAA+H8AAAAAAAD4fwAAAAAAQFNAAAAAAAAA+H8AAAAAAAD4fwAAAAAAAFJAAAAAAAAA+H8AAAAAAEBGQAAAAAAAwEtAAAAAAACATEAAAAAAAABQQAAAAAAAwFRAAAAAAABAVUAAAAAAAMBFQAAAAAAA4FVAAAAAAAAA+H8AAAAAAIBRQAAAAAAAwEtAAAAAAACAQEAAAAAAAAA9QAAAAAAAAERAAAAAAAAASUAAAAAAAAD4fwAAAAAAgEtAAAAAAADAQUAAAAAAAMBQQAAAAAAAADlAAAAAAAAA+H8AAAAAAIA8QAAAAAAAADtAAAAAAAAATEAAAAAAAIBKQAAAAAAAAFZAAAAAAAAAUkAAAAAAAAA9QAAAAAAAAEBAAAAAAAAA+H8AAAAAAIBIQAAAAAAAAD1AAAAAAADAVEAAAAAAAIBHQAAAAAAA4FRAAAAAAACAREAAAAAAAEBSQAAAAAAAwEtAAAAAAABAVkAAAAAAACBSQAAAAAAAgEtAAAAAAAAAPkAAAAAAAAAcQAAAAAAAgDxAAAAAAACARUAAAAAAAAD4fwAAAAAA4FJAAAAAAABAUEAAAAAAAAD4fwAAAAAAwEdAAAAAAAAA+H8AAAAAAMBJQAAAAAAAAPh/AAAAAAAAQ0AAAAAAAMBJQAAAAAAAgEtAAAAAAAAAVEAAAAAAAMBQQAAAAAAAAFFAAAAAAADATUAAAAAAAMBOQAAAAAAAAEpAAAAAAACATEAAAAAAAABXQAAAAAAAAPh/AAAAAAAAVkAAAAAAAIBQQAAAAAAAAPh/AAAAAAAATEAAAAAAAIBOQAAAAAAAwFJAAAAAAABASkAAAAAAAKBQQAAAAAAAYFVAAAAAAABAVEAAAAAAAIBCQAAAAAAAADtA","dtype":"float64","order":"little","shape":[102]},"confidence when incorrect reject":{"__ndarray__":"AAAAAADgVEAAAAAAAABJQAAAAAAAQFRAAAAAAAAAVEAAAAAAAIBIQAAAAAAAIFJAAAAAAABAUEAAAAAAAGBUQAAAAAAAAPh/AAAAAABAUEAAAAAAAEBRQAAAAAAAAPh/AAAAAABATUAAAAAAAABRQAAAAAAAgFVAAAAAAAAA+H8AAAAAAEBSQAAAAAAAwEVAAAAAAAAATkAAAAAAAABZQAAAAAAA4FBAAAAAAAAAWUAAAAAAAABOQAAAAAAAQFNAAAAAAAAAS0AAAAAAAIBIQAAAAAAAwFJAAAAAAACASkAAAAAAAABJQAAAAAAAAPh/AAAAAACATkAAAAAAAAA1QAAAAAAAADtAAAAAAAAA+H8AAAAAAEBQQAAAAAAAQEpAAAAAAACASEAAAAAAAABCQAAAAAAAoFBAAAAAAABASUAAAAAAAABLQAAAAAAAgE1AAAAAAAAA+H8AAAAAAAD4fwAAAAAAADhAAAAAAADAT0AAAAAAAMBEQAAAAAAAgEZAAAAAAABARUAAAAAAAIBKQAAAAAAAAFRAAAAAAADAVkAAAAAAAABAQAAAAAAAoFNAAAAAAACARUAAAAAAAABCQAAAAAAAAD1AAAAAAAAAQkAAAAAAAABEQAAAAAAAQFFAAAAAAABAUkAAAAAAAABRQAAAAAAAgFFAAAAAAABAUEAAAAAAAEBQQAAAAAAAgE5AAAAAAAAAREAAAAAAAABOQAAAAAAAAEpAAAAAAADASkAAAAAAAAD4fwAAAAAAgE9AAAAAAACgUUAAAAAAAABEQAAAAAAAwFVAAAAAAAAA+H8AAAAAAEBRQAAAAAAAwFRAAAAAAABAUEAAAAAAAIBMQAAAAAAAQElAAAAAAADAVEAAAAAAAAAxQAAAAAAAwFRAAAAAAACAREAAAAAAAIBSQAAAAAAAAE1AAAAAAAAASUAAAAAAAEBWQAAAAAAAAElAAAAAAACAVEAAAAAAAIBMQAAAAAAAgFRAAAAAAACAT0AAAAAAAIBMQAAAAAAAAFRAAAAAAABgUEAAAAAAAGBTQAAAAAAAAFRAAAAAAACATkAAAAAAAABKQAAAAAAAoFRA","dtype":"float64","order":"little","shape":[102]},"correct hit percentage":[65,90,90,100,60,80,90,45,80,100,70,90,95,85,75,40,100,70,100,100,60,100,100,65,100,80,80,70,70,90,95,90,90,100,80,90,95,95,90,55,100,65,90,55,75,100,70,90,95,95,70,80,50,65,100,85,85,90,90,90,85,85,90,95,70,95,85,95,90,90,100,80,95,100,90,100,70,90,85,80,85,40,80,90,90,80,90,75,85,100,95,60,100,85,35,95,70,70,90,70,75,85],"correct reject percentage":[80,90,95,75,65,20,75,90,100,50,55,100,65,75,55,100,40,90,70,50,80,95,75,25,40,65,90,80,65,100,80,95,90,100,60,80,60,90,80,60,85,65,100,100,85,80,90,85,90,55,65,75,95,80,70,90,90,90,85,70,95,75,80,75,85,75,85,75,65,90,100,90,80,95,95,100,50,100,70,75,80,40,95,80,85,75,35,70,85,85,75,85,80,95,75,80,50,85,85,80,65,40],"ess":[2,7,3,20,12,2,3,9,10,7,19,0,8,4,7,14,12,10,11,12,1,6,4,6,2,5,1,3,4,5,12,4,4,11,6,3,11,10,12,6,13,12,5,10,4,4,6,3,0,12,6,5,9,7,6,10,18,11,8,16,7,9,11,4,7,4,11,12,3,3,4,11,1,4,2,9,1,2,12,6,5,5,4,9,3,8,6,10,21,5,5,9,1,8,11,5,7,10,7,15,7,7],"gender":["f","m","f","f","f","f","m","m","f","f","f","f","f","f","f","f","f","f","m","m","f","m","f","f","f","f","f","f","f","f","f","f","m","f","f","m","m","m","f","m","f","f","m","m","f","f","m","f","m","f","m","f","f","m","m","f","f","f","f","m","f","f","f","f","m","f","f","f","m","f","f","f","f","f","f","f","f","f","f","f","f","m","f","f","m","f","f","f","f","f","m","m","m","m","f","m","f","f","f","f","f","f"],"index":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101],"insomnia":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"participant number":[8,16,18,22,27,28,30,33,34,35,38,41,46,49,55,71,76,77,78,80,89,90,93,100,101,1,2,3,4,5,6,7,9,10,11,12,13,14,15,17,19,20,21,23,24,25,26,29,31,32,36,37,39,40,42,43,44,45,48,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,72,73,74,75,79,81,82,83,84,85,86,87,88,91,92,94,95,96,97,98,99,102,103],"percent correct":{"__ndarray__":"AAAAAAAgUkAAAAAAAIBWQAAAAAAAIFdAAAAAAADgVUAAAAAAAEBPQAAAAAAAAElAAAAAAACgVEAAAAAAAOBQQAAAAAAAgFZAAAAAAADAUkAAAAAAAEBPQAAAAAAAwFdAAAAAAAAAVEAAAAAAAABUQAAAAAAAQFBAAAAAAACAUUAAAAAAAIBRQAAAAAAAAFRAAAAAAABAVUAAAAAAAMBSQAAAAAAAgFFAAAAAAABgWEAAAAAAAOBVQAAAAAAAgEZAAAAAAACAUUAAAAAAACBSQAAAAAAAQFVAAAAAAADAUkAAAAAAAOBQQAAAAAAAwFdAAAAAAADgVUAAAAAAACBXQAAAAAAAgFZAAAAAAAAAWUAAAAAAAIBRQAAAAAAAQFVAAAAAAABgU0AAAAAAACBXQAAAAAAAQFVAAAAAAADATEAAAAAAACBXQAAAAAAAQFBAAAAAAADAV0AAAAAAAGBTQAAAAAAAAFRAAAAAAACAVkAAAAAAAABUQAAAAAAA4FVAAAAAAAAgV0AAAAAAAMBSQAAAAAAA4FBAAAAAAABgU0AAAAAAACBSQAAAAAAAIFJAAAAAAABAVUAAAAAAAOBVQAAAAAAA4FVAAAAAAACAVkAAAAAAAOBVQAAAAAAAAFRAAAAAAACAVkAAAAAAAABUQAAAAAAAQFVAAAAAAABAVUAAAAAAAGBTQAAAAAAAQFVAAAAAAABAVUAAAAAAAEBVQAAAAAAAYFNAAAAAAACAVkAAAAAAAABZQAAAAAAAQFVAAAAAAADgVUAAAAAAAGBYQAAAAAAAIFdAAAAAAAAAWUAAAAAAAABOQAAAAAAAwFdAAAAAAABgU0AAAAAAAGBTQAAAAAAAoFRAAAAAAAAAREAAAAAAAOBVQAAAAAAAQFVAAAAAAADgVUAAAAAAAGBTQAAAAAAAQE9AAAAAAAAgUkAAAAAAAEBVQAAAAAAAIFdAAAAAAABAVUAAAAAAACBSQAAAAAAAgFZAAAAAAACAVkAAAAAAAIBLQAAAAAAA4FVAAAAAAAAATkAAAAAAAGBTQAAAAAAA4FVAAAAAAADAUkAAAAAAAIBRQAAAAAAAQE9A","dtype":"float64","order":"little","shape":[102]},"psqi":[13,11,9,8,9,14,9,9,12,8,5,7,12,13,13,11,4,10,6,7,8,9,7,15,7,1,5,1,5,7,7,3,3,10,4,5,2,2,2,5,2,3,3,4,9,5,2,1,4,8,2,2,6,3,1,5,7,3,6,6,1,6,4,4,3,5,2,7,4,0,5,1,1,4,1,8,4,2,7,4,1,7,4,5,6,4,2,3,4,3,1,5,2,1,1,3,6,8,8,2,4,5],"sci":[9,4,10,13,13,15,16,14,14,14,14,15,10,14,5,0,16,11,14,12,14,14,16,1,14,29,19,23,26,21,19,28,29,17,22,28,31,31,32,25,30,28,30,22,20,26,32,32,24,26,30,28,21,29,32,26,26,23,18,22,29,20,27,19,29,24,29,17,26,30,17,25,31,27,32,28,25,30,21,29,20,22,23,20,17,27,27,22,25,30,32,30,32,28,31,29,26,20,19,31,22,24]},"selected":{"id":"1617"},"selection_policy":{"id":"1616"}},"id":"1527","type":"ColumnDataSource"},{"attributes":{"height":15},"id":"1568","type":"Spacer"},{"attributes":{},"id":"1613","type":"UnionRenderers"},{"attributes":{},"id":"1529","type":"DataRange1d"},{"attributes":{},"id":"1614","type":"Selection"},{"attributes":{"active_multi":null,"tools":[{"id":"1545"},{"id":"1546"},{"id":"1547"},{"id":"1548"},{"id":"1549"},{"id":"1550"}]},"id":"1552","type":"Toolbar"},{"attributes":{"below":[{"id":"1537"}],"center":[{"id":"1540"},{"id":"1544"}],"frame_height":250,"frame_width":250,"left":[{"id":"1541"}],"renderers":[{"id":"1562"}],"title":{"id":"1606"},"toolbar":{"id":"1552"},"x_range":{"id":"1529"},"x_scale":{"id":"1533"},"y_range":{"id":"1531"},"y_scale":{"id":"1535"}},"id":"1528","subtype":"Figure","type":"Plot"},{"attributes":{"height":15},"id":"1569","type":"Spacer"},{"attributes":{"overlay":{"id":"1551"}},"id":"1547","type":"BoxZoomTool"},{"attributes":{"args":{"cds":{"id":"1527"},"colorby_selector":{"id":"1525"},"render_cds":{"id":"1526"},"x_selector":{"id":"1523"},"xaxis":[{"id":"1537"}],"y_selector":{"id":"1524"},"yaxis":[{"id":"1541"}]},"code":"\n// Extract what we want to color by from selector\nvar colorby = colorby_selector.value;\n\n// View of the colors for convenience\nvar colors = render_cds.data['color'];\n\n// Convenient to have the number of data points\nvar n = colors.length;\n\n// New data\nrender_cds.data['x'] = cds.data[x_selector.value];\nrender_cds.data['y'] = cds.data[y_selector.value];\n\n// Update colors\nif (colorby === 'none') {\n    for (var i = 0; i < n; i++) {\n        colors[i] = '#1f77b3';\n    }\n}\nelse if (colorby === 'gender') {\n    for (var i = 0; i < n; i++) {\n        if (cds.data['gender'][i] === 'f') {\n            colors[i] = '#1f77b3';\n        }\n        else {\n            colors[i] = '#ff7e0e';\n        }\n    }\n}\nelse if (colorby === 'insomnia') {\n    for (var i = 0; i < n; i++) {\n        if (cds.data['insomnia'][i]) {\n            colors[i] = '#1f77b3';\n        }\n        else {\n            colors[i] = '#ff7e0e';\n        }\n    }\n}\n\n// Update axis labels to reflect what was selected\nxaxis[0].axis_label = x_selector.value;\nyaxis[0].axis_label = y_selector.value;\n\nrender_cds.change.emit();\n"},"id":"1564","type":"CustomJS"}],"root_ids":["1571"]},"title":"Bokeh Application","version":"2.3.2"}};
  var render_items = [{"docid":"f8fbcf71-a69f-4b94-b088-617867eaab0b","root_ids":["1571"],"roots":{"1571":"6869ea7f-08ad-483e-adf4-f421088ece7f"}}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script></div>
</div>
<p>Beautiful! We can again save the result and have a stand-alone interactive HTML file.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">bokeh</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">layout</span><span class="p">,</span> <span class="s1">&#39;sleep_facial_recognition.html&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/Users/bois/opt/anaconda3/lib/python3.8/site-packages/bokeh/io/saving.py:126: UserWarning: save() called but no resources were supplied and output_file(...) was never called, defaulting to resources.CDN
  warn(&#34;save() called but no resources were supplied and output_file(...) was never called, defaulting to resources.CDN&#34;)
/Users/bois/opt/anaconda3/lib/python3.8/site-packages/bokeh/io/saving.py:139: UserWarning: save() called but no title was supplied and output_file(...) was never called, using default title &#39;Bokeh Plot&#39;
  warn(&#34;save() called but no title was supplied and output_file(...) was never called, using default title &#39;Bokeh Plot&#39;&#34;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/Users/bois/Dropbox/git/programming_bootcamp/2021/content/lessons/sleep_facial_recognition.html&#39;
</pre></div></div>
</div>
</div>
<div class="section" id="Conclusions">
<h2>Conclusions<a class="headerlink" href="#Conclusions" title="Permalink to this headline">¶</a></h2>
<p>I hope you can see that a little JavaScript goes a long way! But knowing just some basic JavaScript syntax, you can build totally sharable, browser-display-and-playable data displays.</p>
</div>
<div class="section" id="Computing-environment">
<h2>Computing environment<a class="headerlink" href="#Computing-environment" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">load_ext</span> watermark
<span class="o">%</span><span class="k">watermark</span> -v -p numpy,pandas,bokeh,jupyterlab
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Python implementation: CPython
Python version       : 3.8.10
IPython version      : 7.22.0

numpy     : 1.20.2
pandas    : 1.2.4
bokeh     : 2.3.2
jupyterlab: 3.0.14

</pre></div></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="l31_intro_to_scripting.html" class="btn btn-neutral float-right" title="Lesson 31: Introduction to scripting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="l33_bootcamp_recap.html" class="btn btn-neutral float-left" title="Lesson 33: Bootcamp recap" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">
        Last updated on Jul 02, 2021.
      </span>

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-65442910-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>